(function(){function a(){if(!m&&(m=!0,h)){for(var a=0;a<h.length;a++)h[a].call(window,[]);h=[]}}function b(a){var b=window.onload;window.onload="function"!=typeof window.onload?a:function(){b&&b();a()}}function c(){if(!q){q=!0;document.addEventListener&&!k.opera&&document.addEventListener("DOMContentLoaded",a,!1);k.msie&&window==top&&function(){if(!m){try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}}();k.opera&&document.addEventListener("DOMContentLoaded",
function(){if(!m){for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].disabled){setTimeout(arguments.callee,0);return}a()}},!1);if(k.safari){var c;(function(){if(!m)if("loaded"!=document.readyState&&"complete"!=document.readyState)setTimeout(arguments.callee,0);else{if(void 0===c){for(var b=document.getElementsByTagName("link"),d=0;d<b.length;d++)"stylesheet"==b[d].getAttribute("rel")&&c++;b=document.getElementsByTagName("style");c+=b.length}document.styleSheets.length!=c?setTimeout(arguments.callee,
0):a()}})()}b(a)}}var e=window.DomReady={},d=navigator.userAgent.toLowerCase(),k={version:(d.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(d),opera:/opera/.test(d),msie:/msie/.test(d)&&!/opera/.test(d),mozilla:/mozilla/.test(d)&&!/(compatible|webkit)/.test(d)},q=!1,m=!1,h=[];e.ready=function(a,b){c();m?a.call(window,[]):h.push(function(){return a.call(window,[])})};c()})();
(function(){function a(a){return function(b,c,d,e){c=L(c,e,4);var h=!K(b)&&g.keys(b),l=(h||b).length,k=0<a?0:l-1;3>arguments.length&&(d=b[h?h[k]:k],k+=a);for(var m=c,q=d;0<=k&&k<l;k+=a)var f=h?h[k]:k,q=m(q,b[f],f,b);return q}}function b(a){return function(b,c,g){c=A(c,g);g=P(b);for(var d=0<a?0:g-1;0<=d&&d<g;d+=a)if(c(b[d],d,b))return d;return-1}}function c(a,b,c){return function(d,e,h){var k=0,m=P(d);if("number"==typeof h)0<a?k=0<=h?h:Math.max(h+m,k):m=0<=h?Math.min(h+1,m):h+m+1;else if(c&&h&&m)return h=
c(d,e),d[h]===e?h:-1;if(e!==e)return h=b(l.call(d,k,m),g.isNaN),0<=h?h+k:-1;for(h=0<a?k:m-1;0<=h&&h<m;h+=a)if(d[h]===e)return h;return-1}}function e(a,b){var c=sa.length,d=a.constructor,d=g.isFunction(d)&&d.prototype||m,e="constructor";for(g.has(a,e)&&!g.contains(b,e)&&b.push(e);c--;)e=sa[c],e in a&&a[e]!==d[e]&&!g.contains(b,e)&&b.push(e)}var d=this,k=d._,q=Array.prototype,m=Object.prototype,h=q.push,l=q.slice,u=m.toString,r=m.hasOwnProperty,x=Array.isArray,D=Object.keys,E=Function.prototype.bind,
F=Object.create,G=function(){},g=function(a){if(a instanceof g)return a;if(!(this instanceof g))return new g(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=g),exports._=g):d._=g;g.VERSION="1.8.3";var L=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,g){return a.call(b,c,g)};case 3:return function(c,g,d){return a.call(b,c,g,d)};case 4:return function(c,
g,d,e){return a.call(b,c,g,d,e)}}return function(){return a.apply(b,arguments)}},A=function(a,b,c){return null==a?g.identity:g.isFunction(a)?L(a,b,c):g.isObject(a)?g.matcher(a):g.property(a)};g.iteratee=function(a,b){return A(a,b,Infinity)};var O=function(a,b){return function(c){var g=arguments.length;if(2>g||null==c)return c;for(var d=1;d<g;d++)for(var e=arguments[d],h=a(e),k=h.length,l=0;l<k;l++){var m=h[l];b&&void 0!==c[m]||(c[m]=e[m])}return c}},ia=function(a){if(!g.isObject(a))return{};if(F)return F(a);
G.prototype=a;a=new G;G.prototype=null;return a},R=function(a){return function(b){return null==b?void 0:b[a]}},ta=Math.pow(2,53)-1,P=R("length"),K=function(a){a=P(a);return"number"==typeof a&&0<=a&&a<=ta};g.each=g.forEach=function(a,b,c){b=L(b,c);var d;if(K(a))for(c=0,d=a.length;c<d;c++)b(a[c],c,a);else{var e=g.keys(a);c=0;for(d=e.length;c<d;c++)b(a[e[c]],e[c],a)}return a};g.map=g.collect=function(a,b,c){b=A(b,c);c=!K(a)&&g.keys(a);for(var d=(c||a).length,e=Array(d),h=0;h<d;h++){var k=c?c[h]:h;e[h]=
b(a[k],k,a)}return e};g.reduce=g.foldl=g.inject=a(1);g.reduceRight=g.foldr=a(-1);g.find=g.detect=function(a,b,c){b=K(a)?g.findIndex(a,b,c):g.findKey(a,b,c);if(void 0!==b&&-1!==b)return a[b]};g.filter=g.select=function(a,b,c){var d=[];b=A(b,c);g.each(a,function(a,c,ca){b(a,c,ca)&&d.push(a)});return d};g.reject=function(a,b,c){return g.filter(a,g.negate(A(b)),c)};g.every=g.all=function(a,b,c){b=A(b,c);c=!K(a)&&g.keys(a);for(var d=(c||a).length,e=0;e<d;e++){var h=c?c[e]:e;if(!b(a[h],h,a))return!1}return!0};
g.some=g.any=function(a,b,c){b=A(b,c);c=!K(a)&&g.keys(a);for(var d=(c||a).length,e=0;e<d;e++){var h=c?c[e]:e;if(b(a[h],h,a))return!0}return!1};g.contains=g.includes=g.include=function(a,b,c,d){K(a)||(a=g.values(a));if("number"!=typeof c||d)c=0;return 0<=g.indexOf(a,b,c)};g.invoke=function(a,b){var c=l.call(arguments,2),d=g.isFunction(b);return g.map(a,function(a){var g=d?b:a[b];return null==g?g:g.apply(a,c)})};g.pluck=function(a,b){return g.map(a,g.property(b))};g.where=function(a,b){return g.filter(a,
g.matcher(b))};g.findWhere=function(a,b){return g.find(a,g.matcher(b))};g.max=function(a,b,c){var d=-Infinity,e=-Infinity,h;if(null==b&&null!=a){a=K(a)?a:g.values(a);for(var k=0,l=a.length;k<l;k++)c=a[k],c>d&&(d=c)}else b=A(b,c),g.each(a,function(a,c,f){h=b(a,c,f);if(h>e||-Infinity===h&&-Infinity===d)d=a,e=h});return d};g.min=function(a,b,c){var d=Infinity,e=Infinity,h;if(null==b&&null!=a){a=K(a)?a:g.values(a);for(var k=0,l=a.length;k<l;k++)c=a[k],c<d&&(d=c)}else b=A(b,c),g.each(a,function(a,c,f){h=
b(a,c,f);if(h<e||Infinity===h&&Infinity===d)d=a,e=h});return d};g.shuffle=function(a){a=K(a)?a:g.values(a);for(var b=a.length,c=Array(b),d=0,e;d<b;d++)e=g.random(0,d),e!==d&&(c[d]=c[e]),c[e]=a[d];return c};g.sample=function(a,b,c){return null==b||c?(K(a)||(a=g.values(a)),a[g.random(a.length-1)]):g.shuffle(a).slice(0,Math.max(0,b))};g.sortBy=function(a,b,c){b=A(b,c);return g.pluck(g.map(a,function(a,c,g){return{value:a,index:c,criteria:b(a,c,g)}}).sort(function(a,b){var c=a.criteria,g=b.criteria;if(c!==
g){if(c>g||void 0===c)return 1;if(c<g||void 0===g)return-1}return a.index-b.index}),"value")};var ja=function(a){return function(b,c,d){var e={};c=A(c,d);g.each(b,function(g,d){var h=c(g,d,b);a(e,g,h)});return e}};g.groupBy=ja(function(a,b,c){g.has(a,c)?a[c].push(b):a[c]=[b]});g.indexBy=ja(function(a,b,c){a[c]=b});g.countBy=ja(function(a,b,c){g.has(a,c)?a[c]++:a[c]=1});g.toArray=function(a){return a?g.isArray(a)?l.call(a):K(a)?g.map(a,g.identity):g.values(a):[]};g.size=function(a){return null==a?
0:K(a)?a.length:g.keys(a).length};g.partition=function(a,b,c){b=A(b,c);var d=[],e=[];g.each(a,function(a,c,g){(b(a,c,g)?d:e).push(a)});return[d,e]};g.first=g.head=g.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:g.initial(a,a.length-b)};g.initial=function(a,b,c){return l.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))};g.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.rest(a,Math.max(0,a.length-b))};g.rest=g.tail=g.drop=function(a,b,c){return l.call(a,null==b||c?
1:b)};g.compact=function(a){return g.filter(a,g.identity)};var H=function(a,b,c,d){var e=[],h=0;d=d||0;for(var k=P(a);d<k;d++){var l=a[d];if(K(l)&&(g.isArray(l)||g.isArguments(l))){b||(l=H(l,b,c));var m=0,q=l.length;for(e.length+=q;m<q;)e[h++]=l[m++]}else c||(e[h++]=l)}return e};g.flatten=function(a,b){return H(a,b,!1)};g.without=function(a){return g.difference(a,l.call(arguments,1))};g.uniq=g.unique=function(a,b,c,d){g.isBoolean(b)||(d=c,c=b,b=!1);null!=c&&(c=A(c,d));d=[];for(var e=[],h=0,k=P(a);h<
k;h++){var l=a[h],m=c?c(l,h,a):l;b?(h&&e===m||d.push(l),e=m):c?g.contains(e,m)||(e.push(m),d.push(l)):g.contains(d,l)||d.push(l)}return d};g.union=function(){return g.uniq(H(arguments,!0,!0))};g.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=P(a);d<e;d++){var h=a[d];if(!g.contains(b,h)){for(var k=1;k<c&&g.contains(arguments[k],h);k++);k===c&&b.push(h)}}return b};g.difference=function(a){var b=H(arguments,!0,!0,1);return g.filter(a,function(a){return!g.contains(b,a)})};g.zip=function(){return g.unzip(arguments)};
g.unzip=function(a){for(var b=a&&g.max(a,P).length||0,c=Array(b),d=0;d<b;d++)c[d]=g.pluck(a,d);return c};g.object=function(a,b){for(var c={},g=0,d=P(a);g<d;g++)b?c[a[g]]=b[g]:c[a[g][0]]=a[g][1];return c};g.findIndex=b(1);g.findLastIndex=b(-1);g.sortedIndex=function(a,b,c,g){c=A(c,g,1);b=c(b);g=0;for(var d=P(a);g<d;){var e=Math.floor((g+d)/2);c(a[e])<b?g=e+1:d=e}return g};g.indexOf=c(1,g.findIndex,g.sortedIndex);g.lastIndexOf=c(-1,g.findLastIndex);g.range=function(a,b,c){null==b&&(b=a||0,a=0);c=c||
1;b=Math.max(Math.ceil((b-a)/c),0);for(var g=Array(b),d=0;d<b;d++,a+=c)g[d]=a;return g};var ua=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);b=ia(a.prototype);a=a.apply(b,e);return g.isObject(a)?a:b};g.bind=function(a,b){if(E&&a.bind===E)return E.apply(a,l.call(arguments,1));if(!g.isFunction(a))throw new TypeError("Bind must be called on a function");var c=l.call(arguments,2),d=function(){return ua(a,d,b,this,c.concat(l.call(arguments)))};return d};g.partial=function(a){var b=l.call(arguments,
1),c=function(){for(var d=0,e=b.length,h=Array(e),k=0;k<e;k++)h[k]=b[k]===g?arguments[d++]:b[k];for(;d<arguments.length;)h.push(arguments[d++]);return ua(a,c,this,this,h)};return c};g.bindAll=function(a){var b,c=arguments.length,d;if(1>=c)throw Error("bindAll must be passed function names");for(b=1;b<c;b++)d=arguments[b],a[d]=g.bind(a[d],a);return a};g.memoize=function(a,b){var c=function(d){var e=c.cache,h=""+(b?b.apply(this,arguments):d);g.has(e,h)||(e[h]=a.apply(this,arguments));return e[h]};c.cache=
{};return c};g.delay=function(a,b){var c=l.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};g.defer=g.partial(g.delay,g,1);g.throttle=function(a,b,c){var d,e,h,k=null,l=0;c||(c={});var m=function(){l=!1===c.leading?0:g.now();k=null;h=a.apply(d,e);k||(d=e=null)};return function(){var q=g.now();l||!1!==c.leading||(l=q);var f=b-(q-l);d=this;e=arguments;0>=f||f>b?(k&&(clearTimeout(k),k=null),l=q,h=a.apply(d,e),k||(d=e=null)):k||!1===c.trailing||(k=setTimeout(m,f));return h}};
g.debounce=function(a,b,c){var d,e,h,k,l,m=function(){var q=g.now()-k;q<b&&0<=q?d=setTimeout(m,b-q):(d=null,c||(l=a.apply(h,e),d||(h=e=null)))};return function(){h=this;e=arguments;k=g.now();var q=c&&!d;d||(d=setTimeout(m,b));q&&(l=a.apply(h,e),h=e=null);return l}};g.wrap=function(a,b){return g.partial(b,a)};g.negate=function(a){return function(){return!a.apply(this,arguments)}};g.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,
d);return d}};g.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};g.before=function(a,b){var c;return function(){0<--a&&(c=b.apply(this,arguments));1>=a&&(b=null);return c}};g.once=g.partial(g.before,2);var ka=!{toString:null}.propertyIsEnumerable("toString"),sa="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");g.keys=function(a){if(!g.isObject(a))return[];if(D)return D(a);var b=[],c;for(c in a)g.has(a,c)&&b.push(c);ka&&e(a,
b);return b};g.allKeys=function(a){if(!g.isObject(a))return[];var b=[],c;for(c in a)b.push(c);ka&&e(a,b);return b};g.values=function(a){for(var b=g.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d};g.mapObject=function(a,b,c){b=A(b,c);c=g.keys(a);for(var d=c.length,e={},h,k=0;k<d;k++)h=c[k],e[h]=b(a[h],h,a);return e};g.pairs=function(a){for(var b=g.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d};g.invert=function(a){for(var b={},c=g.keys(a),d=0,e=c.length;d<
e;d++)b[a[c[d]]]=c[d];return b};g.functions=g.methods=function(a){var b=[],c;for(c in a)g.isFunction(a[c])&&b.push(c);return b.sort()};g.extend=O(g.allKeys);g.extendOwn=g.assign=O(g.keys);g.findKey=function(a,b,c){b=A(b,c);c=g.keys(a);for(var d,e=0,h=c.length;e<h;e++)if(d=c[e],b(a[d],d,a))return d};g.pick=function(a,b,c){var d={},e=a,h,k;if(null==e)return d;g.isFunction(b)?(k=g.allKeys(e),h=L(b,c)):(k=H(arguments,!1,!1,1),h=function(a,b,c){return b in c},e=Object(e));for(var l=0,m=k.length;l<m;l++){var q=
k[l],f=e[q];h(f,q,e)&&(d[q]=f)}return d};g.omit=function(a,b,c){if(g.isFunction(b))b=g.negate(b);else{var d=g.map(H(arguments,!1,!1,1),String);b=function(a,b){return!g.contains(d,b)}}return g.pick(a,b,c)};g.defaults=O(g.allKeys,!0);g.create=function(a,b){var c=ia(a);b&&g.extendOwn(c,b);return c};g.clone=function(a){return g.isObject(a)?g.isArray(a)?a.slice():g.extend({},a):a};g.tap=function(a,b){b(a);return a};g.isMatch=function(a,b){var c=g.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),
h=0;h<d;h++){var k=c[h];if(b[k]!==e[k]||!(k in e))return!1}return!0};var va=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof g&&(a=a._wrapped);b instanceof g&&(b=b._wrapped);var e=u.call(a);if(e!==u.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}e="[object Array]"===e;if(!e){if("object"!=
typeof a||"object"!=typeof b)return!1;var h=a.constructor,k=b.constructor;if(h!==k&&!(g.isFunction(h)&&h instanceof h&&g.isFunction(k)&&k instanceof k)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];d=d||[];for(h=c.length;h--;)if(c[h]===a)return d[h]===b;c.push(a);d.push(b);if(e){h=a.length;if(h!==b.length)return!1;for(;h--;)if(!va(a[h],b[h],c,d))return!1}else{e=g.keys(a);h=e.length;if(g.keys(b).length!==h)return!1;for(;h--;)if(k=e[h],!g.has(b,k)||!va(a[k],b[k],c,d))return!1}c.pop();d.pop();
return!0};g.isEqual=function(a,b){return va(a,b)};g.isEmpty=function(a){return null==a?!0:K(a)&&(g.isArray(a)||g.isString(a)||g.isArguments(a))?0===a.length:0===g.keys(a).length};g.isElement=function(a){return!(!a||1!==a.nodeType)};g.isArray=x||function(a){return"[object Array]"===u.call(a)};g.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};g.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){g["is"+a]=function(b){return u.call(b)==="[object "+
a+"]"}});g.isArguments(arguments)||(g.isArguments=function(a){return g.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(a){return"function"==typeof a||!1});g.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};g.isNaN=function(a){return g.isNumber(a)&&a!==+a};g.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===u.call(a)};g.isNull=function(a){return null===a};g.isUndefined=function(a){return void 0===a};g.has=function(a,b){return null!=
a&&r.call(a,b)};g.noConflict=function(){d._=k;return this};g.identity=function(a){return a};g.constant=function(a){return function(){return a}};g.noop=function(){};g.property=R;g.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};g.matcher=g.matches=function(a){a=g.extendOwn({},a);return function(b){return g.isMatch(b,a)}};g.times=function(a,b,c){var d=Array(Math.max(0,a));b=L(b,c,1);for(c=0;c<a;c++)d[c]=b(c);return d};g.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*
(b-a+1))};g.now=Date.now||function(){return(new Date).getTime()};x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};O=g.invert(x);R=function(a){var b=function(b){return a[b]},c="(?:"+g.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){a=null==a?"":""+a;return d.test(a)?a.replace(e,b):a}};g.escape=R(x);g.unescape=R(O);g.result=function(a,b,c){b=null==a?void 0:a[b];void 0===b&&(b=c);return g.isFunction(b)?b.call(a):b};var wa=0;g.uniqueId=function(a){var b=
++wa+"";return a?a+b:b};g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var la=/(.)^/,Ha={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},xa=/\\|'|\r|\n|\u2028|\u2029/g,da=function(a){return"\\"+Ha[a]};g.template=function(a,b,c){!b&&c&&(b=c);b=g.defaults({},b,g.templateSettings);c=RegExp([(b.escape||la).source,(b.interpolate||la).source,(b.evaluate||la).source].join("|")+"|$","g");var d=0,e="__p+='";a.replace(c,function(b,
c,g,f,h){e+=a.slice(d,h).replace(xa,da);d=h+b.length;c?e+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":g?e+="'+\n((__t=("+g+"))==null?'':__t)+\n'":f&&(e+="';\n"+f+"\n__p+='");return b});e+="';\n";b.variable||(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var h=new Function(b.variable||"obj","_",e)}catch(k){throw k.source=e,k;}c=function(a){return h.call(this,a,g)};c.source="function("+(b.variable||
"obj")+"){\n"+e+"}";return c};g.chain=function(a){a=g(a);a._chain=!0;return a};var ea=function(a,b){return a._chain?g(b).chain():b};g.mixin=function(a){g.each(g.functions(a),function(b){var c=g[b]=a[b];g.prototype[b]=function(){var a=[this._wrapped];h.apply(a,arguments);return ea(this,c.apply(g,a))}})};g.mixin(g);g.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=q[a];g.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!==a&&"splice"!==a||0!==c.length||
delete c[0];return ea(this,c)}});g.each(["concat","join","slice"],function(a){var b=q[a];g.prototype[a]=function(){return ea(this,b.apply(this._wrapped,arguments))}});g.prototype.value=function(){return this._wrapped};g.prototype.valueOf=g.prototype.toJSON=g.prototype.value;g.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return g})}).call(this);
(function(a,b){"object"===typeof module&&"object"===typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)})("undefined"!==typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=f.type(a);return"function"===c||f.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"===typeof b&&0<b&&b-1 in a}function e(a,b,c){if(f.isFunction(b))return f.grep(a,function(a,n){return!!b.call(a,
n,a)!==c});if(b.nodeType)return f.grep(a,function(a){return a===b!==c});if("string"===typeof b){if(Cb.test(b))return f.filter(b,a,c);b=f.filter(b,a)}return f.grep(a,function(a){return 0<=oa.call(b,a)!==c})}function d(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function k(a){var b=bb[a]={};f.each(a.match(W)||[],function(a,n){b[n]=!0});return b}function q(){C.removeEventListener("DOMContentLoaded",q,!1);a.removeEventListener("load",q,!1);f.ready()}function m(){Object.defineProperty(this.cache={},
0,{get:function(){return{}}});this.expando=f.expando+m.uid++}function h(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(Db,"-$1").toLowerCase(),c=a.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Eb.test(c)?f.parseJSON(c):c}catch(t){}J.set(a,b,c)}else c=void 0;return c}function l(){return!0}function u(){return!1}function r(){try{return C.activeElement}catch(a){}}function x(a,b){return f.nodeName(a,"table")&&f.nodeName(11!==b.nodeType?
b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function D(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function E(a){var b=Fb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function F(a,b){for(var c=0,f=a.length;c<f;c++)B.set(a[c],"globalEval",!b||B.get(b[c],"globalEval"))}function G(a,b){var c,t,y,d;if(1===b.nodeType){if(B.hasData(a)&&(d=B.access(a),c=B.set(b,d),d=d.events))for(y in delete c.handle,
c.events={},d)for(c=0,t=d[y].length;c<t;c++)f.event.add(b,y,d[y][c]);J.hasData(a)&&(y=J.access(a),y=f.extend({},y),J.set(b,y))}}function g(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&f.nodeName(a,b)?f.merge([a],c):c}function L(n,b){var c,t=f(b.createElement(n)).appendTo(b.body),y=a.getDefaultComputedStyle&&(c=a.getDefaultComputedStyle(t[0]))?c.display:f.css(t[0],"display");t.detach();return y}function A(a){var b=
C,c=cb[a];c||(c=L(a,b),"none"!==c&&c||(Ja=(Ja||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Ja[0].contentDocument,b.write(),b.close(),c=L(a,b),Ja.detach()),cb[a]=c);return c}function O(a,b,c){var t,y,d=a.style;(c=c||Ka(a))&&(y=c.getPropertyValue(b)||c[b]);c&&(""!==y||f.contains(a.ownerDocument,a)||(y=f.style(a,b)),Ua.test(y)&&db.test(b)&&(a=d.width,b=d.minWidth,t=d.maxWidth,d.minWidth=d.maxWidth=d.width=y,y=c.width,d.width=a,d.minWidth=b,d.maxWidth=t));return void 0!==
y?y+"":y}function ia(a,b){return{get:function(){if(a())delete this.get;else return(this.get=b).apply(this,arguments)}}}function R(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),f=b,y=eb.length;y--;)if(b=eb[y]+c,b in a)return b;return f}function ta(a,b,c){return(a=Gb.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function P(a,b,c,t,y){b=c===(t?"border":"content")?4:"width"===b?1:0;for(var d=0;4>b;b+=2)"margin"===c&&(d+=f.css(a,c+fa[b],!0,y)),t?("content"===c&&(d-=f.css(a,"padding"+
fa[b],!0,y)),"margin"!==c&&(d-=f.css(a,"border"+fa[b]+"Width",!0,y))):(d+=f.css(a,"padding"+fa[b],!0,y),"padding"!==c&&(d+=f.css(a,"border"+fa[b]+"Width",!0,y)));return d}function K(a,b,c){var t=!0,y="width"===b?a.offsetWidth:a.offsetHeight,d=Ka(a),e="border-box"===f.css(a,"boxSizing",!1,d);if(0>=y||null==y){y=O(a,b,d);if(0>y||null==y)y=a.style[b];if(Ua.test(y))return y;t=e&&(I.boxSizingReliable()||y===a.style[b]);y=parseFloat(y)||0}return y+P(a,b,c||(e?"border":"content"),t,d)+"px"}function ja(a,
b){for(var c,t,d,e=[],g=0,h=a.length;g<h;g++)t=a[g],t.style&&(e[g]=B.get(t,"olddisplay"),c=t.style.display,b?(e[g]||"none"!==c||(t.style.display=""),""===t.style.display&&ya(t)&&(e[g]=B.access(t,"olddisplay",A(t.nodeName)))):(d=ya(t),"none"===c&&d||B.set(t,"olddisplay",d?c:f.css(t,"display"))));for(g=0;g<h;g++)t=a[g],!t.style||b&&"none"!==t.style.display&&""!==t.style.display||(t.style.display=b?e[g]||"":"none");return a}function H(a,b,c,f,d){return new H.prototype.init(a,b,c,f,d)}function ua(){setTimeout(function(){pa=
void 0});return pa=f.now()}function ka(a,b){var c,f=0,d={height:a};for(b=b?1:0;4>f;f+=2-b)c=fa[f],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function sa(a,b,c){for(var f,d=(za[b]||[]).concat(za["*"]),e=0,g=d.length;e<g;e++)if(f=d[e].call(c,b,a))return f}function va(a,b){var c,t,d,e,g;for(c in a)if(t=f.camelCase(c),d=b[t],e=a[c],f.isArray(e)&&(d=e[1],e=a[c]=e[0]),c!==t&&(a[t]=e,delete a[c]),(g=f.cssHooks[t])&&"expand"in g)for(c in e=g.expand(e),delete a[t],e)c in a||(a[c]=e[c],
b[c]=d);else b[t]=d}function wa(a,b,c){var t,d=0,e=La.length,g=f.Deferred().always(function(){delete h.elem}),h=function(){if(t)return!1;for(var b=pa||ua(),b=Math.max(0,k.startTime+k.duration-b),c=1-(b/k.duration||0),v=0,f=k.tweens.length;v<f;v++)k.tweens[v].run(c);g.notifyWith(a,[k,c,b]);if(1>c&&f)return b;g.resolveWith(a,[k]);return!1},k=g.promise({elem:a,props:f.extend({},b),opts:f.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:pa||ua(),duration:c.duration,tweens:[],
createTween:function(b,c){var v=f.Tween(a,k.opts,b,c,k.opts.specialEasing[b]||k.opts.easing);k.tweens.push(v);return v},stop:function(b){var c=0,v=b?k.tweens.length:0;if(t)return this;for(t=!0;c<v;c++)k.tweens[c].run(1);b?g.resolveWith(a,[k,b]):g.rejectWith(a,[k,b]);return this}});c=k.props;for(va(c,k.opts.specialEasing);d<e;d++)if(b=La[d].call(k,a,c,k.opts))return b;f.map(c,sa,k);f.isFunction(k.opts.start)&&k.opts.start.call(a,k);f.fx.timer(f.extend(h,{elem:a,anim:k,queue:k.opts.queue}));return k.progress(k.opts.progress).done(k.opts.done,
k.opts.complete).fail(k.opts.fail).always(k.opts.always)}function la(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var t,d=0,e=b.toLowerCase().match(W)||[];if(f.isFunction(c))for(;t=e[d++];)"+"===t[0]?(t=t.slice(1)||"*",(a[t]=a[t]||[]).unshift(c)):(a[t]=a[t]||[]).push(c)}}function Ha(a,b,c,t){function d(h){var k;e[h]=!0;f.each(a[h]||[],function(a,n){var f=n(b,c,t);if("string"===typeof f&&!g&&!e[f])return b.dataTypes.unshift(f),d(f),!1;if(g)return!(k=f)});return k}var e={},g=a===Va;return d(b.dataTypes[0])||
!e["*"]&&d("*")}function xa(a,b){var c,t,d=f.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((d[c]?a:t||(t={}))[c]=b[c]);t&&f.extend(!0,a,t);return a}function da(a,b,c,t){var d;if(f.isArray(b))f.each(b,function(b,v){c||Hb.test(a)?t(a,v):da(a+"["+("object"===typeof v?b:"")+"]",v,c,t)});else if(c||"object"!==f.type(b))t(a,b);else for(d in b)da(a+"["+d+"]",b[d],c,t)}function ea(a){return f.isWindow(a)?a:9===a.nodeType&&a.defaultView}var ca=[],Q=ca.slice,ab=ca.concat,Sa=ca.push,oa=ca.indexOf,
Ea={},yb=Ea.toString,Ta=Ea.hasOwnProperty,I={},C=a.document,f=function(a,b){return new f.fn.init(a,b)},zb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ab=/^-ms-/,Bb=/-([\da-z])/gi,Ib=function(a,b){return b.toUpperCase()};f.fn=f.prototype={jquery:"2.1.4",constructor:f,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:Q.call(this)},pushStack:function(a){a=f.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;return a},
each:function(a,b){return f.each(this,a,b)},map:function(a){return this.pushStack(f.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Sa,sort:ca.sort,splice:ca.splice};f.extend=f.fn.extend=function(){var a,
b,c,t,d,e=arguments[0]||{},g=1,h=arguments.length,k=!1;"boolean"===typeof e&&(k=e,e=arguments[g]||{},g++);"object"===typeof e||f.isFunction(e)||(e={});g===h&&(e=this,g--);for(;g<h;g++)if(null!=(a=arguments[g]))for(b in a)c=e[b],t=a[b],e!==t&&(k&&t&&(f.isPlainObject(t)||(d=f.isArray(t)))?(d?(d=!1,c=c&&f.isArray(c)?c:[]):c=c&&f.isPlainObject(c)?c:{},e[b]=f.extend(k,c,t)):void 0!==t&&(e[b]=t));return e};f.extend({expando:"jQuery"+("2.1.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);
},noop:function(){},isFunction:function(a){return"function"===f.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!f.isArray(a)&&0<=a-parseFloat(a)+1},isPlainObject:function(a){return"object"!==f.type(a)||a.nodeType||f.isWindow(a)||a.constructor&&!Ta.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){for(var b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?
Ea[yb.call(a)]||"object":typeof a},globalEval:function(a){var b;b=eval;if(a=f.trim(a))1===a.indexOf("use strict")?(b=C.createElement("script"),b.text=a,C.head.appendChild(b).parentNode.removeChild(b)):b(a)},camelCase:function(a){return a.replace(Ab,"ms-").replace(Bb,Ib)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,f){var t,d=0,e=a.length;t=c(a);if(f)if(t)for(;d<e&&(t=b.apply(a[d],f),!1!==t);d++);else for(d in a){if(t=b.apply(a[d],f),!1===
t)break}else if(t)for(;d<e&&(t=b.call(a[d],d,a[d]),!1!==t);d++);else for(d in a)if(t=b.call(a[d],d,a[d]),!1===t)break;return a},trim:function(a){return null==a?"":(a+"").replace(zb,"")},makeArray:function(a,b){var w=b||[];null!=a&&(c(Object(a))?f.merge(w,"string"===typeof a?[a]:a):Sa.call(w,a));return w},inArray:function(a,b,c){return null==b?-1:oa.call(b,a,c)},merge:function(a,b){for(var c=+b.length,f=0,d=a.length;f<c;f++)a[d++]=b[f];a.length=d;return a},grep:function(a,b,c){for(var f=[],d=0,e=a.length,
g=!c;d<e;d++)c=!b(a[d],d),c!==g&&f.push(a[d]);return f},map:function(a,b,f){var t,d=0,e=a.length,g=[];if(c(a))for(;d<e;d++)t=b(a[d],d,f),null!=t&&g.push(t);else for(d in a)t=b(a[d],d,f),null!=t&&g.push(t);return ab.apply([],g)},guid:1,proxy:function(a,b){var c,t;"string"===typeof b&&(c=a[b],b=a,a=c);if(f.isFunction(a))return t=Q.call(arguments,2),c=function(){return a.apply(b||this,t.concat(Q.call(arguments)))},c.guid=a.guid=a.guid||f.guid++,c},now:Date.now,support:I});f.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){Ea["[object "+b+"]"]=b.toLowerCase()});var aa=function(a){function b(a,n,c,f){var v,d,t,w,e;(n?n.ownerDocument||n:X)!==U&&Aa(n);n=n||U;c=c||[];w=n.nodeType;if("string"!==typeof a||!a||1!==w&&9!==w&&11!==w)return c;if(!f&&ga){if(11!==w&&(v=Da.exec(a)))if(t=v[1])if(9===w)if((d=n.getElementById(t))&&d.parentNode){if(d.id===t)return c.push(d),c}else return c;else{if(n.ownerDocument&&(d=n.ownerDocument.getElementById(t))&&Ia(n,d)&&d.id===t)return c.push(d),c}else{if(v[2])return qa.apply(c,
n.getElementsByTagName(a)),c;if((t=v[3])&&A.getElementsByClassName)return qa.apply(c,n.getElementsByClassName(t)),c}if(A.qsa&&(!S||!S.test(a))){d=v=N;t=n;e=1!==w&&a;if(1===w&&"object"!==n.nodeName.toLowerCase()){w=K(a);(v=n.getAttribute("id"))?d=v.replace(Ea,"\\$&"):n.setAttribute("id",d);d="[id='"+d+"'] ";for(t=w.length;t--;)w[t]=d+u(w[t]);t=oa.test(a)&&m(n.parentNode)||n;e=w.join(",")}if(e)try{return qa.apply(c,t.querySelectorAll(e)),c}catch(g){}finally{v||n.removeAttribute("id")}}}return O(a.replace(aa,
"$1"),n,c,f)}function c(){function a(n,c){b.push(n+" ")>z.cacheLength&&delete a[b.shift()];return a[n+" "]=c}var b=[];return a}function f(a){a[N]=!0;return a}function d(a){var b=U.createElement("div");try{return!!a(b)}catch(n){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function e(a,b){for(var n=a.split("|"),c=a.length;c--;)z.attrHandle[n[c]]=b}function g(a,b){var n=b&&a,c=n&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(c)return c;
if(n)for(;n=n.nextSibling;)if(n===b)return-1;return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var n=b.nodeName.toLowerCase();return("input"===n||"button"===n)&&b.type===a}}function l(a){return f(function(b){b=+b;return f(function(n,c){for(var f,v=a([],n.length,b),d=v.length;d--;)n[f=v[d]]&&(n[f]=!(c[f]=n[f]))})})}function m(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function q(){}function u(a){for(var b=
0,n=a.length,c="";b<n;b++)c+=a[b].value;return c}function r(a,b,n){var c=b.dir,f=n&&"parentNode"===c,v=ia++;return b.first?function(b,n,v){for(;b=b[c];)if(1===b.nodeType||f)return a(b,n,v)}:function(b,n,d){var t,w,e=[Y,v];if(d)for(;b=b[c];){if((1===b.nodeType||f)&&a(b,n,d))return!0}else for(;b=b[c];)if(1===b.nodeType||f){w=b[N]||(b[N]={});if((t=w[c])&&t[0]===Y&&t[1]===v)return e[2]=t[2];w[c]=e;if(e[2]=a(b,n,d))return!0}}}function x(a){return 1<a.length?function(b,n,c){for(var f=a.length;f--;)if(!a[f](b,
n,c))return!1;return!0}:a[0]}function E(a,b,n,c,f){for(var v,d=[],t=0,w=a.length,e=null!=b;t<w;t++)if(v=a[t])if(!n||n(v,c,f))d.push(v),e&&b.push(t);return d}function F(a,n,c,d,w,e){d&&!d[N]&&(d=F(d));w&&!w[N]&&(w=F(w,e));return f(function(f,t,e,g){var y,h,T=[],k=[],l=t.length,M;if(!(M=f)){M=n||"*";for(var m=e.nodeType?[e]:e,q=[],Fa=0,Ma=m.length;Fa<Ma;Fa++)b(M,m[Fa],q);M=q}M=!a||!f&&n?M:E(M,T,a,e,g);m=c?w||(f?a:l||d)?[]:t:M;c&&c(M,m,e,g);if(d)for(y=E(m,k),d(y,[],e,g),e=y.length;e--;)if(h=y[e])m[k[e]]=
!(M[k[e]]=h);if(f){if(w||a){if(w){y=[];for(e=m.length;e--;)(h=m[e])&&y.push(M[e]=h);w(null,m=[],y,g)}for(e=m.length;e--;)(h=m[e])&&-1<(y=w?Ba(f,h):T[e])&&(f[y]=!(t[y]=h))}}else m=E(m===t?m.splice(l,m.length):m),w?w(null,t,m,g):qa.apply(t,m)})}function D(a){var b,n,c,f=a.length,v=z.relative[a[0].type];n=v||z.relative[" "];for(var d=v?1:0,t=r(function(a){return a===b},n,!0),w=r(function(a){return-1<Ba(b,a)},n,!0),e=[function(a,n,c){a=!v&&(c||n!==H)||((b=n).nodeType?t(a,n,c):w(a,n,c));b=null;return a}];d<
f;d++)if(n=z.relative[a[d].type])e=[r(x(e),n)];else{n=z.filter[a[d].type].apply(null,a[d].matches);if(n[N]){for(c=++d;c<f&&!z.relative[a[c].type];c++);return F(1<d&&x(e),1<d&&u(a.slice(0,d-1).concat({value:" "===a[d-2].type?"*":""})).replace(aa,"$1"),n,d<c&&D(a.slice(d,c)),c<f&&D(a=a.slice(c)),c<f&&u(a))}e.push(n)}return x(e)}function G(a,n){var c=0<n.length,d=0<a.length,w=function(f,w,t,e,g){var y,h,k,T=0,l="0",m=f&&[],M=[],q=H,Fa=f||d&&z.find.TAG("*",g),Ma=Y+=null==q?1:Math.random()||.1,u=Fa.length;
for(g&&(H=w!==U&&w);l!==u&&null!=(y=Fa[l]);l++){if(d&&y){for(h=0;k=a[h++];)if(k(y,w,t)){e.push(y);break}g&&(Y=Ma)}c&&((y=!k&&y)&&T--,f&&m.push(y))}T+=l;if(c&&l!==T){for(h=0;k=n[h++];)k(m,M,w,t);if(f){if(0<T)for(;l--;)m[l]||M[l]||(M[l]=ha.call(e));M=E(M)}qa.apply(e,M);g&&!f&&0<M.length&&1<T+n.length&&b.uniqueSort(e)}g&&(Y=Ma,H=q);return m};return c?f(w):w}var B,A,z,L,C,K,I,O,H,J,Ga,Aa,U,Z,ga,S,Ca,P,Ia,N="sizzle"+1*new Date,X=a.document,Y=0,ia=0,R=c(),V=c(),ta=c(),W=function(a,b){a===b&&(Ga=!0);return 0},
ca={}.hasOwnProperty,Q=[],ha=Q.pop,ka=Q.push,qa=Q.push,fa=Q.slice,Ba=function(a,b){for(var n=0,c=a.length;n<c;n++)if(a[n]===b)return n;return-1},ja="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),la="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ja+"))|)[\\x20\\t\\r\\n\\f]*\\]",ea=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+
la+")*)|.*)\\)|)",pa=/[\x20\t\r\n\f]+/g,aa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,ra=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,sa=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ua=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,va=new RegExp(ea),xa=new RegExp("^"+ja+"$"),da={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+la),PSEUDO:new RegExp("^"+ea),
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ya=/^(?:input|select|textarea|button)$/i,za=/^h\d$/i,ba=
/^[^{]+\{\s*\[native \w/,Da=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oa=/[+~]/,Ea=/'|\\/g,ma=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,na=function(a,b,n){a="0x"+b-65536;return a!==a||n?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},wa=function(){Aa()};try{qa.apply(Q=fa.call(X.childNodes),X.childNodes),Q[X.childNodes.length].nodeType}catch(Ha){qa={apply:Q.length?function(a,b){ka.apply(a,fa.call(b))}:function(a,b){for(var n=a.length,c=0;a[n++]=b[c++];);a.length=
n-1}}}A=b.support={};C=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};Aa=b.setDocument=function(a){var b=a?a.ownerDocument||a:X;if(b===U||9!==b.nodeType||!b.documentElement)return U;U=b;Z=b.documentElement;(a=b.defaultView)&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",wa,!1):a.attachEvent&&a.attachEvent("onunload",wa));ga=!C(b);A.attributes=d(function(a){a.className="i";return!a.getAttribute("className")});A.getElementsByTagName=d(function(a){a.appendChild(b.createComment(""));
return!a.getElementsByTagName("*").length});A.getElementsByClassName=ba.test(b.getElementsByClassName);A.getById=d(function(a){Z.appendChild(a).id=N;return!b.getElementsByName||!b.getElementsByName(N).length});A.getById?(z.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&ga){var n=b.getElementById(a);return n&&n.parentNode?[n]:[]}},z.filter.ID=function(a){var b=a.replace(ma,na);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(ma,
na);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});z.find.TAG=A.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a);if(A.qsa)return b.querySelectorAll(a)}:function(a,b){var n,c=[],f=0,v=b.getElementsByTagName(a);if("*"===a){for(;n=v[f++];)1===n.nodeType&&c.push(n);return c}return v};z.find.CLASS=A.getElementsByClassName&&function(a,b){if(ga)return b.getElementsByClassName(a)};
Ca=[];S=[];if(A.qsa=ba.test(b.querySelectorAll))d(function(a){Z.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&S.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||S.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll("[id~="+
N+"-]").length||S.push("~=");a.querySelectorAll(":checked").length||S.push(":checked");a.querySelectorAll("a#"+N+"+*").length||S.push(".#.+[+~]")}),d(function(a){var n=b.createElement("input");n.setAttribute("type","hidden");a.appendChild(n).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&S.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||S.push(":enabled",":disabled");a.querySelectorAll("*,:x");S.push(",.*:")});(A.matchesSelector=ba.test(P=Z.matches||
Z.webkitMatchesSelector||Z.mozMatchesSelector||Z.oMatchesSelector||Z.msMatchesSelector))&&d(function(a){A.disconnectedMatch=P.call(a,"div");P.call(a,"[s!='']:x");Ca.push("!=",ea)});S=S.length&&new RegExp(S.join("|"));Ca=Ca.length&&new RegExp(Ca.join("|"));Ia=(a=ba.test(Z.compareDocumentPosition))||ba.test(Z.contains)?function(a,b){var n=9===a.nodeType?a.documentElement:a,c=b&&b.parentNode;return a===c||!!(c&&1===c.nodeType&&(n.contains?n.contains(c):a.compareDocumentPosition&&a.compareDocumentPosition(c)&
16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};W=a?function(a,n){if(a===n)return Ga=!0,0;var c=!a.compareDocumentPosition-!n.compareDocumentPosition;if(c)return c;c=(a.ownerDocument||a)===(n.ownerDocument||n)?a.compareDocumentPosition(n):1;return c&1||!A.sortDetached&&n.compareDocumentPosition(a)===c?a===b||a.ownerDocument===X&&Ia(X,a)?-1:n===b||n.ownerDocument===X&&Ia(X,n)?1:J?Ba(J,a)-Ba(J,n):0:c&4?-1:1}:function(a,n){if(a===n)return Ga=!0,0;var c,f=0;c=a.parentNode;var v=
n.parentNode,d=[a],w=[n];if(!c||!v)return a===b?-1:n===b?1:c?-1:v?1:J?Ba(J,a)-Ba(J,n):0;if(c===v)return g(a,n);for(c=a;c=c.parentNode;)d.unshift(c);for(c=n;c=c.parentNode;)w.unshift(c);for(;d[f]===w[f];)f++;return f?g(d[f],w[f]):d[f]===X?-1:w[f]===X?1:0};return b};b.matches=function(a,n){return b(a,null,null,n)};b.matchesSelector=function(a,n){(a.ownerDocument||a)!==U&&Aa(a);n=n.replace(ua,"='$1']");if(!(!A.matchesSelector||!ga||Ca&&Ca.test(n)||S&&S.test(n)))try{var c=P.call(a,n);if(c||A.disconnectedMatch||
a.document&&11!==a.document.nodeType)return c}catch(f){}return 0<b(n,U,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==U&&Aa(a);return Ia(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==U&&Aa(a);var n=z.attrHandle[b.toLowerCase()],n=n&&ca.call(z.attrHandle,b.toLowerCase())?n(a,b,!ga):void 0;return void 0!==n?n:A.attributes||!ga?a.getAttribute(b):(n=a.getAttributeNode(b))&&n.specified?n.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=
function(a){var b,n=[],c=0,f=0;Ga=!A.detectDuplicates;J=!A.sortStable&&a.slice(0);a.sort(W);if(Ga){for(;b=a[f++];)b===a[f]&&(c=n.push(f));for(;c--;)a.splice(n[c],1)}J=null;return a};L=b.getText=function(a){var b,n="",c=0;b=a.nodeType;if(!b)for(;b=a[c++];)n+=L(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)n+=L(a)}else if(3===b||4===b)return a.nodeValue;return n};z=b.selectors={cacheLength:50,createPseudo:f,match:da,attrHandle:{},
find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ma,na);a[3]=(a[3]||a[4]||a[5]||"").replace(ma,na);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,
n=!a[6]&&a[2];if(da.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":n&&va.test(n)&&(b=K(n,!0))&&(b=n.indexOf(")",n.length-b)-n.length)&&(a[0]=a[0].slice(0,b),a[2]=n.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ma,na).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&R(a,function(a){return b.test("string"===
typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,n,c){return function(f){f=b.attr(f,a);if(null==f)return"!="===n;if(!n)return!0;f+="";return"="===n?f===c:"!="===n?f!==c:"^="===n?c&&0===f.indexOf(c):"*="===n?c&&-1<f.indexOf(c):"$="===n?c&&f.slice(-c.length)===c:"~="===n?-1<(" "+f.replace(pa," ")+" ").indexOf(c):"|="===n?f===c||f.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,n,c,f){var v="nth"!==a.slice(0,3),d="last"!==a.slice(-4),
w="of-type"===b;return 1===c&&0===f?function(a){return!!a.parentNode}:function(b,n,t){var e,g,y,h,T;n=v!==d?"nextSibling":"previousSibling";var k=b.parentNode,l=w&&b.nodeName.toLowerCase();t=!t&&!w;if(k){if(v){for(;n;){for(g=b;g=g[n];)if(w?g.nodeName.toLowerCase()===l:1===g.nodeType)return!1;T=n="only"===a&&!T&&"nextSibling"}return!0}T=[d?k.firstChild:k.lastChild];if(d&&t)for(t=k[N]||(k[N]={}),e=t[a]||[],h=e[0]===Y&&e[1],y=e[0]===Y&&e[2],g=h&&k.childNodes[h];g=++h&&g&&g[n]||(y=h=0)||T.pop();){if(1===
g.nodeType&&++y&&g===b){t[a]=[Y,h,y];break}}else if(t&&(e=(b[N]||(b[N]={}))[a])&&e[0]===Y)y=e[1];else for(;(g=++h&&g&&g[n]||(y=h=0)||T.pop())&&((w?g.nodeName.toLowerCase()!==l:1!==g.nodeType)||!++y||(t&&((g[N]||(g[N]={}))[a]=[Y,y]),g!==b)););y-=f;return y===c||0===y%c&&0<=y/c}}},PSEUDO:function(a,n){var c,d=z.pseudos[a]||z.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return d[N]?d(n):1<d.length?(c=[a,a,"",n],z.setFilters.hasOwnProperty(a.toLowerCase())?f(function(a,b){for(var c,
f=d(a,n),v=f.length;v--;)c=Ba(a,f[v]),a[c]=!(b[c]=f[v])}):function(a){return d(a,0,c)}):d}},pseudos:{not:f(function(a){var b=[],n=[],c=I(a.replace(aa,"$1"));return c[N]?f(function(a,b,n,f){f=c(a,null,f,[]);for(var v=a.length;v--;)if(n=f[v])a[v]=!(b[v]=n)}):function(a,f,v){b[0]=a;c(b,null,v,n);b[0]=null;return!n.pop()}}),has:f(function(a){return function(n){return 0<b(a,n).length}}),contains:f(function(a){a=a.replace(ma,na);return function(b){return-1<(b.textContent||b.innerText||L(b)).indexOf(a)}}),
lang:f(function(a){xa.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ma,na).toLowerCase();return function(b){var n;do if(n=ga?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return n=n.toLowerCase(),n===a||0===n.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===Z},focus:function(a){return a===U.activeElement&&(!U.hasFocus||U.hasFocus())&&!!(a.type||a.href||
~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return za.test(a.nodeName)},input:function(a){return ya.test(a.nodeName)},
button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,n){return[0>n?n+b:n]}),even:l(function(a,b){for(var n=0;n<b;n+=2)a.push(n);return a}),odd:l(function(a,b){for(var n=1;n<b;n+=2)a.push(n);return a}),lt:l(function(a,b,n){for(b=
0>n?n+b:n;0<=--b;)a.push(b);return a}),gt:l(function(a,b,n){for(n=0>n?n+b:n;++n<b;)a.push(n);return a})}};z.pseudos.nth=z.pseudos.eq;for(B in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[B]=h(B);for(B in{submit:!0,reset:!0})z.pseudos[B]=k(B);q.prototype=z.filters=z.pseudos;z.setFilters=new q;K=b.tokenize=function(a,n){var c,f,d,w,t,e,g;if(t=V[a+" "])return n?0:t.slice(0);t=a;e=[];for(g=z.preFilter;t;){if(!c||(f=ra.exec(t)))f&&(t=t.slice(f[0].length)||t),e.push(d=[]);c=!1;if(f=sa.exec(t))c=
f.shift(),d.push({value:c,type:f[0].replace(aa," ")}),t=t.slice(c.length);for(w in z.filter)!(f=da[w].exec(t))||g[w]&&!(f=g[w](f))||(c=f.shift(),d.push({value:c,type:w,matches:f}),t=t.slice(c.length));if(!c)break}return n?t.length:t?b.error(a):V(a,e).slice(0)};I=b.compile=function(a,b){var n,c=[],f=[],v=ta[a+" "];if(!v){b||(b=K(a));for(n=b.length;n--;)v=D(b[n]),v[N]?c.push(v):f.push(v);v=ta(a,G(f,c));v.selector=a}return v};O=b.select=function(a,b,n,c){var f,v,d,t,w="function"===typeof a&&a,e=!c&&
K(a=w.selector||a);n=n||[];if(1===e.length){v=e[0]=e[0].slice(0);if(2<v.length&&"ID"===(d=v[0]).type&&A.getById&&9===b.nodeType&&ga&&z.relative[v[1].type]){b=(z.find.ID(d.matches[0].replace(ma,na),b)||[])[0];if(!b)return n;w&&(b=b.parentNode);a=a.slice(v.shift().value.length)}for(f=da.needsContext.test(a)?0:v.length;f--;){d=v[f];if(z.relative[t=d.type])break;if(t=z.find[t])if(c=t(d.matches[0].replace(ma,na),oa.test(v[0].type)&&m(b.parentNode)||b)){v.splice(f,1);a=c.length&&u(v);if(!a)return qa.apply(n,
c),n;break}}}(w||I(a,e))(c,b,!ga,n,oa.test(a)&&m(b.parentNode)||b);return n};A.sortStable=N.split("").sort(W).join("")===N;A.detectDuplicates=!!Ga;Aa();A.sortDetached=d(function(a){return a.compareDocumentPosition(U.createElement("div"))&1});d(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||e("type|href|height|width",function(a,b,n){if(!n)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});A.attributes&&d(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value",
"");return""===a.firstChild.getAttribute("value")})||e("value",function(a,b,n){if(!n&&"input"===a.nodeName.toLowerCase())return a.defaultValue});d(function(a){return null==a.getAttribute("disabled")})||e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,n){var c;if(!n)return!0===a[b]?b.toLowerCase():(c=a.getAttributeNode(b))&&c.specified?c.value:null});return b}(a);f.find=aa;f.expr=aa.selectors;f.expr[":"]=f.expr.pseudos;
f.unique=aa.uniqueSort;f.text=aa.getText;f.isXMLDoc=aa.isXML;f.contains=aa.contains;var fb=f.expr.match.needsContext,gb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Cb=/^.[^:#\[\.,]*$/;f.filter=function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return 1===b.length&&1===d.nodeType?f.find.matchesSelector(d,a)?[d]:[]:f.find.matches(a,f.grep(b,function(a){return 1===a.nodeType}))};f.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!==typeof a)return this.pushStack(f(a).filter(function(){for(b=0;b<
c;b++)if(f.contains(e[b],this))return!0}));for(b=0;b<c;b++)f.find(a,e[b],d);d=this.pushStack(1<c?f.unique(d):d);d.selector=this.selector?this.selector+" "+a:a;return d},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"===typeof a&&fb.test(a)?f(a):a||[],!1).length}});var Na,Kb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(f.fn.init=function(a,b){var c;if(!a)return this;if("string"===typeof a){c="<"===
a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Kb.exec(a);if(!c||!c[1]&&b)return!b||b.jquery?(b||Na).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof f?b[0]:b,f.merge(this,f.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:C,!0)),gb.test(c[1])&&f.isPlainObject(b))for(c in b)if(f.isFunction(this[c]))this[c](b[c]);else this.attr(c,b[c])}else(c=C.getElementById(c[2]))&&c.parentNode&&(this.length=1,this[0]=c),this.context=C,this.selector=a;return this}if(a.nodeType)return this.context=
this[0]=a,this.length=1,this;if(f.isFunction(a))return"undefined"!==typeof Na.ready?Na.ready(a):a(f);void 0!==a.selector&&(this.selector=a.selector,this.context=a.context);return f.makeArray(a,this)}).prototype=f.fn;Na=f(C);var Lb=/^(?:parents|prev(?:Until|All))/,Mb={children:!0,contents:!0,next:!0,prev:!0};f.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&f(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===
a.nodeType&&a!==b&&c.push(a);return c}});f.fn.extend({has:function(a){var b=f(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(f.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,g=[],h=fb.test(a)||"string"!==typeof a?f(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(h?-1<h.index(c):1===c.nodeType&&f.find.matchesSelector(c,a))){g.push(c);break}return this.pushStack(1<g.length?f.unique(g):g)},index:function(a){return a?
"string"===typeof a?oa.call(f(a),this[0]):oa.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(f.unique(f.merge(this.get(),f(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});f.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return d(a,
"nextSibling")},prev:function(a){return d(a,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return a.contentDocument||f.merge([],a.childNodes)}},function(a,
b){f.fn[a]=function(c,d){var e=f.map(this,b,c);"Until"!==a.slice(-5)&&(d=c);d&&"string"===typeof d&&(e=f.filter(d,e));1<this.length&&(Mb[a]||f.unique(e),Lb.test(a)&&e.reverse());return this.pushStack(e)}});var W=/\S+/g,bb={};f.Callbacks=function(a){a="string"===typeof a?bb[a]||k(a):f.extend({},a);var b,c,d,e,g,h,l=[],m=!a.once&&[],q=function(f){b=a.memory&&f;c=!0;h=e||0;e=0;g=l.length;for(d=!0;l&&h<g;h++)if(!1===l[h].apply(f[0],f[1])&&a.stopOnFalse){b=!1;break}d=!1;l&&(m?m.length&&q(m.shift()):b?
l=[]:u.disable())},u={add:function(){if(l){var c=l.length;(function Jb(b){f.each(b,function(b,c){var d=f.type(c);"function"===d?a.unique&&u.has(c)||l.push(c):c&&c.length&&"string"!==d&&Jb(c)})})(arguments);d?g=l.length:b&&(e=c,q(b))}return this},remove:function(){l&&f.each(arguments,function(a,b){for(var c;-1<(c=f.inArray(b,l,c));)l.splice(c,1),d&&(c<=g&&g--,c<=h&&h--)});return this},has:function(a){return a?-1<f.inArray(a,l):!(!l||!l.length)},empty:function(){l=[];g=0;return this},disable:function(){l=
m=b=void 0;return this},disabled:function(){return!l},lock:function(){m=void 0;b||u.disable();return this},locked:function(){return!m},fireWith:function(a,b){!l||c&&!m||(b=b||[],b=[a,b.slice?b.slice():b],d?m.push(b):q(b));return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!c}};return u};f.extend({Deferred:function(a){var b=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",
f.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return f.Deferred(function(c){f.each(b,function(b,n){var v=f.isFunction(a[b])&&a[b];e[n[1]](function(){var a=v&&v.apply(this,arguments);if(a&&f.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[n[0]+"With"](this===d?c.promise():this,v?[a]:arguments)})});a=null}).promise()},promise:function(a){return null!=
a?f.extend(a,d):d}},e={};d.pipe=d.then;f.each(b,function(a,n){var f=n[2],g=n[3];d[n[1]]=f.add;g&&f.add(function(){c=g},b[a^1][2].disable,b[2][2].lock);e[n[0]]=function(){e[n[0]+"With"](this===e?d:this,arguments);return this};e[n[0]+"With"]=f.fireWith});d.promise(e);a&&a.call(e,e);return e},when:function(a){var b=0,c=Q.call(arguments),d=c.length,e=1!==d||a&&f.isFunction(a.promise)?d:0,g=1===e?a:f.Deferred(),h=function(a,b,c){return function(n){b[a]=this;c[a]=1<arguments.length?Q.call(arguments):n;
c===k?g.notifyWith(b,c):--e||g.resolveWith(b,c)}},k,l,m;if(1<d)for(k=Array(d),l=Array(d),m=Array(d);b<d;b++)c[b]&&f.isFunction(c[b].promise)?c[b].promise().done(h(b,m,c)).fail(g.reject).progress(h(b,l,k)):--e;e||g.resolveWith(m,c);return g.promise()}});var Oa;f.fn.ready=function(a){f.ready.promise().done(a);return this};f.extend({isReady:!1,readyWait:1,holdReady:function(a){a?f.readyWait++:f.ready(!0)},ready:function(a){(!0===a?--f.readyWait:f.isReady)||(f.isReady=!0,!0!==a&&0<--f.readyWait||(Oa.resolveWith(C,
[f]),f.fn.triggerHandler&&(f(C).triggerHandler("ready"),f(C).off("ready"))))}});f.ready.promise=function(b){Oa||(Oa=f.Deferred(),"complete"===C.readyState?setTimeout(f.ready):(C.addEventListener("DOMContentLoaded",q,!1),a.addEventListener("load",q,!1)));return Oa.promise(b)};f.ready.promise();var ha=f.access=function(a,b,c,d,e,g,h){var k=0,l=a.length,m=null==c;if("object"===f.type(c))for(k in e=!0,c)f.access(a,b,k,c[k],!0,g,h);else if(void 0!==d&&(e=!0,f.isFunction(d)||(h=!0),m&&(h?(b.call(a,d),b=
null):(m=b,b=function(a,b,c){return m.call(f(a),c)})),b))for(;k<l;k++)b(a[k],c,h?d:d.call(a[k],k,b(a[k],c)));return e?a:m?b.call(a):l?b(a[0],c):g};f.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};m.uid=1;m.accepts=f.acceptData;m.prototype={key:function(a){if(!m.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=m.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,f.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,
b,c){var d;a=this.key(a);var e=this.cache[a];if("string"===typeof b)e[b]=c;else if(f.isEmptyObject(e))f.extend(this.cache[a],b);else for(d in b)e[d]=b[d];return e},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return c=this.get(a,b),void 0!==c?c:this.get(a,f.camelCase(b));this.set(a,b,c);return void 0!==c?c:b},remove:function(a,b){var c,d;c=this.key(a);var e=this.cache[c];if(void 0===b)this.cache[c]=
{};else for(f.isArray(b)?d=b.concat(b.map(f.camelCase)):(c=f.camelCase(b),b in e?d=[b,c]:(d=c,d=d in e?[d]:d.match(W)||[])),c=d.length;c--;)delete e[d[c]]},hasData:function(a){return!f.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var B=new m,J=new m,Eb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Db=/([A-Z])/g;f.extend({hasData:function(a){return J.hasData(a)||B.hasData(a)},data:function(a,b,c){return J.access(a,b,c)},removeData:function(a,
b){J.remove(a,b)},_data:function(a,b,c){return B.access(a,b,c)},_removeData:function(a,b){B.remove(a,b)}});f.fn.extend({data:function(a,b){var c,d,e,g=this[0],k=g&&g.attributes;if(void 0===a){if(this.length&&(e=J.get(g),1===g.nodeType&&!B.get(g,"hasDataAttrs"))){for(c=k.length;c--;)k[c]&&(d=k[c].name,0===d.indexOf("data-")&&(d=f.camelCase(d.slice(5)),h(g,d,e[d])));B.set(g,"hasDataAttrs",!0)}return e}return"object"===typeof a?this.each(function(){J.set(this,a)}):ha(this,function(b){var c,d=f.camelCase(a);
if(g&&void 0===b){c=J.get(g,a);if(void 0!==c)return c;c=J.get(g,d);if(void 0!==c)return c;c=h(g,d,void 0);if(void 0!==c)return c}else this.each(function(){var c=J.get(this,d);J.set(this,d,b);-1!==a.indexOf("-")&&void 0!==c&&J.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){J.remove(this,a)})}});f.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=B.get(a,b),c&&(!d||f.isArray(c)?d=B.access(a,b,f.makeArray(c)):d.push(c)),d||
[]},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.length,e=c.shift(),g=f._queueHooks(a,b),h=function(){f.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete g.stop,e.call(a,h,g));!d&&g&&g.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return B.get(a,c)||B.access(a,c,{empty:f.Callbacks("once memory").add(function(){B.remove(a,[b+"queue",c])})})}});f.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<
c?f.queue(this[0],a):void 0===b?this:this.each(function(){var c=f.queue(this,a,b);f._queueHooks(this,a);"fx"===a&&"inprogress"!==c[0]&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=f.Deferred(),g=this,h=this.length,k=function(){--d||e.resolveWith(g,[g])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";h--;)(c=B.get(g[h],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(k));
k();return e.promise(b)}});var Pa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fa=["Top","Right","Bottom","Left"],ya=function(a,b){a=b||a;return"none"===f.css(a,"display")||!f.contains(a.ownerDocument,a)},hb=/^(?:checkbox|radio)$/i;(function(){var a=C.createDocumentFragment().appendChild(C.createElement("div")),b=C.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);I.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;
a.innerHTML="<textarea>x</textarea>";I.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue})();I.focusinBubbles="onfocusin"in a;var Nb=/^key/,Ob=/^(?:mouse|pointer|contextmenu)|click/,ib=/^(?:focusinfocus|focusoutblur)$/,jb=/^([^.]*)(?:\.(.+)|)$/;f.event={global:{},add:function(a,b,c,d,e){var g,h,k,l,m,q,u,r,x;if(m=B.get(a))for(c.handler&&(g=c,c=g.handler,e=g.selector),c.guid||(c.guid=f.guid++),(l=m.events)||(l=m.events={}),(h=m.handle)||(h=m.handle=function(b){return"undefined"!==typeof f&&f.event.triggered!==
b.type?f.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(W)||[""],m=b.length;m--;)k=jb.exec(b[m])||[],r=q=k[1],x=(k[2]||"").split(".").sort(),r&&(k=f.event.special[r]||{},r=(e?k.delegateType:k.bindType)||r,k=f.event.special[r]||{},q=f.extend({type:r,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&f.expr.match.needsContext.test(e),namespace:x.join(".")},g),(u=l[r])||(u=l[r]=[],u.delegateCount=0,k.setup&&!1!==k.setup.call(a,d,x,h)||a.addEventListener&&a.addEventListener(r,
h,!1)),k.add&&(k.add.call(a,q),q.handler.guid||(q.handler.guid=c.guid)),e?u.splice(u.delegateCount++,0,q):u.push(q),f.event.global[r]=!0)},remove:function(a,b,c,d,e){var g,h,k,l,m,q,u,r,x,E,F,D=B.hasData(a)&&B.get(a);if(D&&(l=D.events)){b=(b||"").match(W)||[""];for(m=b.length;m--;)if(k=jb.exec(b[m])||[],x=F=k[1],E=(k[2]||"").split(".").sort(),x){u=f.event.special[x]||{};x=(d?u.delegateType:u.bindType)||x;r=l[x]||[];k=k[2]&&new RegExp("(^|\\.)"+E.join("\\.(?:.*\\.|)")+"(\\.|$)");for(h=g=r.length;g--;)q=
r[g],!e&&F!==q.origType||c&&c.guid!==q.guid||k&&!k.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(r.splice(g,1),q.selector&&r.delegateCount--,u.remove&&u.remove.call(a,q));h&&!r.length&&(u.teardown&&!1!==u.teardown.call(a,E,D.handle)||f.removeEvent(a,x,D.handle),delete l[x])}else for(x in l)f.event.remove(a,x+b[m],c,d,!0);f.isEmptyObject(l)&&(delete D.handle,B.remove(a,"events"))}},trigger:function(b,c,d,e){var g,h,k,l,m,q,u=[d||C],r=Ta.call(b,"type")?b.type:b;q=Ta.call(b,"namespace")?
b.namespace.split("."):[];h=g=d=d||C;if(3!==d.nodeType&&8!==d.nodeType&&!ib.test(r+f.event.triggered)&&(0<=r.indexOf(".")&&(q=r.split("."),r=q.shift(),q.sort()),l=0>r.indexOf(":")&&"on"+r,b=b[f.expando]?b:new f.Event(r,"object"===typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:f.makeArray(c,[b]),q=f.event.special[r]||{},e||!q.trigger||!1!==q.trigger.apply(d,
c))){if(!e&&!q.noBubble&&!f.isWindow(d)){k=q.delegateType||r;ib.test(k+r)||(h=h.parentNode);for(;h;h=h.parentNode)u.push(h),g=h;g===(d.ownerDocument||C)&&u.push(g.defaultView||g.parentWindow||a)}for(g=0;(h=u[g++])&&!b.isPropagationStopped();)b.type=1<g?k:q.bindType||r,(m=(B.get(h,"events")||{})[b.type]&&B.get(h,"handle"))&&m.apply(h,c),(m=l&&h[l])&&m.apply&&f.acceptData(h)&&(b.result=m.apply(h,c),!1===b.result&&b.preventDefault());b.type=r;e||b.isDefaultPrevented()||q._default&&!1!==q._default.apply(u.pop(),
c)||!f.acceptData(d)||!l||!f.isFunction(d[r])||f.isWindow(d)||((g=d[l])&&(d[l]=null),f.event.triggered=r,d[r](),f.event.triggered=void 0,g&&(d[l]=g));return b.result}},dispatch:function(a){a=f.event.fix(a);var b,c,d,e,g=[],h=Q.call(arguments);b=(B.get(this,"events")||{})[a.type]||[];var k=f.event.special[a.type]||{};h[0]=a;a.delegateTarget=this;if(!k.preDispatch||!1!==k.preDispatch.call(this,a)){g=f.event.handlers.call(this,a,b);for(b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,
c=0;(d=e.handlers[c++])&&!a.isImmediatePropagationStopped();)if(!a.namespace_re||a.namespace_re.test(d.namespace))a.handleObj=d,a.data=d.data,d=((f.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==d&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation());k.postDispatch&&k.postDispatch.call(this,a);return a.result}},handlers:function(a,b){var c,d,e,g,h=[],k=b.delegateCount,l=a.target;if(k&&l.nodeType&&(!a.button||"click"!==a.type))for(;l!==this;l=l.parentNode||this)if(!0!==
l.disabled||"click"!==a.type){d=[];for(c=0;c<k;c++)g=b[c],e=g.selector+" ",void 0===d[e]&&(d[e]=g.needsContext?0<=f(e,this).index(l):f.find(e,this,null,[l]).length),d[e]&&d.push(g);d.length&&h.push({elem:l,handlers:d})}k<b.length&&h.push({elem:this,handlers:b.slice(k)});return h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==
a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,f=b.button;null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||C,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0));a.which||
void 0===f||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var b,c,d;b=a.type;var e=a,g=this.fixHooks[b];g||(this.fixHooks[b]=g=Ob.test(b)?this.mouseHooks:Nb.test(b)?this.keyHooks:{});d=g.props?this.props.concat(g.props):this.props;a=new f.Event(e);for(b=d.length;b--;)c=d[b],a[c]=e[c];a.target||(a.target=C);3===a.target.nodeType&&(a.target=a.target.parentNode);return g.filter?g.filter(a,e):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==r()&&this.focus)return this.focus(),
!1},delegateType:"focusin"},blur:{trigger:function(){if(this===r()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&f.nodeName(this,"input"))return this.click(),!1},_default:function(a){return f.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});
d?f.event.trigger(a,null,b):f.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};f.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?l:u):this.type=a;b&&f.extend(this,b);this.timeStamp=a&&a.timeStamp||f.now();this[f.expando]=!0};f.Event.prototype=
{isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=l;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=l;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=l;a&&a.stopImmediatePropagation&&a.stopImmediatePropagation();this.stopPropagation()}};
f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,n=a.relatedTarget,d=a.handleObj;if(!n||n!==this&&!f.contains(this,n))a.type=d.origType,c=d.handler.apply(this,arguments),a.type=b;return c}}});I.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){var d=
this.ownerDocument||this,f=B.access(d,b);f||d.addEventListener(a,c,!0);B.access(d,b,(f||0)+1)},teardown:function(){var d=this.ownerDocument||this,f=B.access(d,b)-1;f?B.access(d,b,f):(d.removeEventListener(a,c,!0),B.remove(d,b))}}});f.fn.extend({on:function(a,b,c,d,e){var g,h;if("object"===typeof a){"string"!==typeof b&&(c=c||b,b=void 0);for(h in a)this.on(h,b,c,a[h],e);return this}null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"===typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0));if(!1===d)d=u;else if(!d)return this;
1===e&&(g=d,d=function(a){f().off(a);return g.apply(this,arguments)},d.guid=g.guid||(g.guid=f.guid++));return this.each(function(){f.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,f(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"===typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;
!1===c&&(c=u);return this.each(function(){f.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return f.event.trigger(a,b,c,!0)}});var kb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lb=/<([\w:]+)/,Pb=/<|&#?\w+;/,Qb=/<(?:script|style|link)/i,Rb=/checked\s*(?:[^=]|=\s*.checked.)/i,mb=/^$|\/(?:java|ecma)script/i,Fb=/^true\/(.*)/,Sb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
V={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};V.optgroup=V.option;V.tbody=V.tfoot=V.colgroup=V.caption=V.thead;V.th=V.td;f.extend({clone:function(a,b,c){var d,e,h,k,l=a.cloneNode(!0),m=f.contains(a.ownerDocument,a);if(!(I.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||f.isXMLDoc(a)))for(k=g(l),
h=g(a),d=0,e=h.length;d<e;d++){var q=h[d],r=k[d],u=r.nodeName.toLowerCase();if("input"===u&&hb.test(q.type))r.checked=q.checked;else if("input"===u||"textarea"===u)r.defaultValue=q.defaultValue}if(b)if(c)for(h=h||g(a),k=k||g(l),d=0,e=h.length;d<e;d++)G(h[d],k[d]);else G(a,l);k=g(l,"script");0<k.length&&F(k,!m&&g(a,"script"));return l},buildFragment:function(a,b,c,d){for(var e,h,k,l=b.createDocumentFragment(),m=[],q=0,r=a.length;q<r;q++)if((e=a[q])||0===e)if("object"===f.type(e))f.merge(m,e.nodeType?
[e]:e);else if(Pb.test(e)){h=h||l.appendChild(b.createElement("div"));k=(lb.exec(e)||["",""])[1].toLowerCase();k=V[k]||V._default;h.innerHTML=k[1]+e.replace(kb,"<$1></$2>")+k[2];for(k=k[0];k--;)h=h.lastChild;f.merge(m,h.childNodes);h=l.firstChild;h.textContent=""}else m.push(b.createTextNode(e));l.textContent="";for(q=0;e=m[q++];)if(!d||-1===f.inArray(e,d))if(a=f.contains(e.ownerDocument,e),h=g(l.appendChild(e),"script"),a&&F(h),c)for(k=0;e=h[k++];)mb.test(e.type||"")&&c.push(e);return l},cleanData:function(a){for(var b,
c,d,e,g=f.event.special,h=0;void 0!==(c=a[h]);h++){if(f.acceptData(c)&&(e=c[B.expando])&&(b=B.cache[e])){if(b.events)for(d in b.events)g[d]?f.event.remove(c,d):f.removeEvent(c,d,b.handle);B.cache[e]&&delete B.cache[e]}delete J.cache[c[J.expando]]}}});f.fn.extend({text:function(a){return ha(this,function(a){return void 0===a?f.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,
function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||x(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=x(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},
remove:function(a,b){for(var c,d=a?f.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||f.cleanData(g(c)),c.parentNode&&(b&&f.contains(c.ownerDocument,c)&&F(g(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(f.cleanData(g(a,!1)),a.textContent="");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return ha(this,function(a){var b=
this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Qb.test(a)&&!V[(lb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(kb,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(f.cleanData(g(b,!1)),b.innerHTML=a);b=0}catch(n){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];this.domManip(arguments,function(b){a=this.parentNode;f.cleanData(g(this));a&&a.replaceChild(b,this)});return a&&(a.length||
a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=ab.apply([],a);var c,d,e,h,k=0,l=this.length,m=this,q=l-1,r=a[0],u=f.isFunction(r);if(u||1<l&&"string"===typeof r&&!I.checkClone&&Rb.test(r))return this.each(function(c){var d=m.eq(c);u&&(a[0]=r.call(this,c,d.html()));d.domManip(a,b)});if(l&&(c=f.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){d=f.map(g(c,"script"),D);for(e=d.length;k<l;k++)h=c,k!==
q&&(h=f.clone(h,!0,!0),e&&f.merge(d,g(h,"script"))),b.call(this[k],h,k);if(e)for(c=d[d.length-1].ownerDocument,f.map(d,E),k=0;k<e;k++)h=d[k],mb.test(h.type||"")&&!B.access(h,"globalEval")&&f.contains(c,h)&&(h.src?f._evalUrl&&f._evalUrl(h.src):f.globalEval(h.textContent.replace(Sb,"")))}return this}});f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(a){for(var c=[],d=f(a),n=d.length-1,e=0;e<=n;e++)a=e===
n?this:this.clone(!0),f(d[e])[b](a),Sa.apply(c,a.get());return this.pushStack(c)}});var Ja,cb={},db=/^margin/,Ua=new RegExp("^("+Pa+")(?!px)[a-z%]+$","i"),Ka=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};(function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
h.innerHTML="";e.appendChild(g);var f=a.getComputedStyle(h,null);c="1%"!==f.top;d="4px"===f.width;e.removeChild(g)}var c,d,e=C.documentElement,g=C.createElement("div"),h=C.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",I.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",g.appendChild(h),a.getComputedStyle&&f.extend(I,{pixelPosition:function(){b();
return c},boxSizingReliable:function(){null==d&&b();return d},reliableMarginRight:function(){var b,c=h.appendChild(C.createElement("div"));c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";c.style.marginRight=c.style.width="0";h.style.width="1px";e.appendChild(g);b=!parseFloat(a.getComputedStyle(c,null).marginRight);e.removeChild(g);h.removeChild(c);return b}}))})();f.swap=function(a,b,c,d){var f,
e={};for(f in b)e[f]=a.style[f],a.style[f]=b[f];c=c.apply(a,d||[]);for(f in b)a.style[f]=e[f];return c};var Tb=/^(none|table(?!-c[ea]).+)/,Gb=new RegExp("^("+Pa+")(.*)$","i"),Ub=new RegExp("^([+-])=("+Pa+")","i"),Vb={position:"absolute",visibility:"hidden",display:"block"},nb={letterSpacing:"0",fontWeight:"400"},eb=["Webkit","O","Moz","ms"];f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=O(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,
fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,g,h,k=f.camelCase(b),l=a.style;b=f.cssProps[k]||(f.cssProps[k]=R(l,k));h=f.cssHooks[b]||f.cssHooks[k];if(void 0!==c)g=typeof c,"string"===g&&(e=Ub.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(f.css(a,b)),g="number"),null!=c&&c===c&&("number"!==g||f.cssNumber[k]||(c+="px"),I.clearCloneStyle||""!==c||0!==b.indexOf("background")||
(l[b]="inherit"),h&&"set"in h&&void 0===(c=h.set(a,c,d))||(l[b]=c));else return h&&"get"in h&&void 0!==(e=h.get(a,!1,d))?e:l[b]}},css:function(a,b,c,d){var e,g;g=f.camelCase(b);b=f.cssProps[g]||(f.cssProps[g]=R(a.style,g));(g=f.cssHooks[b]||f.cssHooks[g])&&"get"in g&&(e=g.get(a,!0,c));void 0===e&&(e=O(a,b,d));"normal"===e&&b in nb&&(e=nb[b]);return""===c||c?(a=parseFloat(e),!0===c||f.isNumeric(a)?a||0:e):e}});f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return Tb.test(f.css(a,
"display"))&&0===a.offsetWidth?f.swap(a,Vb,function(){return K(a,b,d)}):K(a,b,d)},set:function(a,c,d){var n=d&&Ka(a);return ta(a,c,d?P(a,b,d,"border-box"===f.css(a,"boxSizing",!1,n),n):0)}}});f.cssHooks.marginRight=ia(I.reliableMarginRight,function(a,b){if(b)return f.swap(a,{display:"inline-block"},O,[a,"marginRight"])});f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d=0,f={};for(c="string"===typeof c?c.split(" "):[c];4>d;d++)f[a+fa[d]+b]=c[d]||
c[d-2]||c[0];return f}};db.test(a)||(f.cssHooks[a+b].set=ta)});f.fn.extend({css:function(a,b){return ha(this,function(a,b,c){var d,n={},e=0;if(f.isArray(b)){c=Ka(a);for(d=b.length;e<d;e++)n[b[e]]=f.css(a,b[e],!1,c);return n}return void 0!==c?f.style(a,b,c):f.css(a,b)},a,b,1<arguments.length)},show:function(){return ja(this,!0)},hide:function(){return ja(this)},toggle:function(a){return"boolean"===typeof a?a?this.show():this.hide():this.each(function(){ya(this)?f(this).show():f(this).hide()})}});f.Tween=
H;H.prototype={constructor:H,init:function(a,b,c,d,e,g){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=g||(f.cssNumber[c]?"":"px")},cur:function(){var a=H.propHooks[this.prop];return a&&a.get?a.get(this):H.propHooks._default.get(this)},run:function(a){var b,c=H.propHooks[this.prop];this.pos=this.options.duration?b=f.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;
this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):H.propHooks._default.set(this);return this}};H.prototype.init.prototype=H.prototype;H.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=f.css(a.elem,a.prop,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(f.fx.step[a.prop])f.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[f.cssProps[a.prop]]||f.cssHooks[a.prop])?f.style(a.elem,a.prop,
a.now+a.unit):a.elem[a.prop]=a.now}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};f.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};f.fx=H.prototype.init;f.fx.step={};var pa,Qa,Wb=/^(?:toggle|show|hide)$/,ob=new RegExp("^(?:([+-])=|)("+Pa+")([a-z%]*)$","i"),Xb=/queueHooks$/,La=[function(a,b,c){var d,e,g,h,k,l,m=this,q={},r=a.style,u=a.nodeType&&ya(a),x=B.get(a,"fxshow");c.queue||
(h=f._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,k=h.empty.fire,h.empty.fire=function(){h.unqueued||k()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--;f.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[r.overflow,r.overflowX,r.overflowY],l=f.css(a,"display"),e="none"===l?B.get(a,"olddisplay")||A(a.nodeName):l,"inline"===e&&"none"===f.css(a,"float")&&(r.display="inline-block"));c.overflow&&(r.overflow="hidden",m.always(function(){r.overflow=
c.overflow[0];r.overflowX=c.overflow[1];r.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Wb.exec(e)){delete b[d];g=g||"toggle"===e;if(e===(u?"hide":"show"))if("show"===e&&x&&void 0!==x[d])u=!0;else continue;q[d]=x&&x[d]||f.style(a,d)}else l=void 0;if(f.isEmptyObject(q))"inline"===("none"===l?A(a.nodeName):l)&&(r.display=l);else for(d in x?"hidden"in x&&(u=x.hidden):x=B.access(a,"fxshow",{}),g&&(x.hidden=!u),u?f(a).show():m.done(function(){f(a).hide()}),m.done(function(){var b;B.remove(a,"fxshow");
for(b in q)f.style(a,b,q[b])}),q)b=sa(u?x[d]:0,d,m),d in x||(x[d]=b.start,u&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],za={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=ob.exec(b),g=e&&e[3]||(f.cssNumber[a]?"":"px"),h=(f.cssNumber[a]||"px"!==g&&+d)&&ob.exec(f.css(c.elem,a)),k=1,l=20;if(h&&h[3]!==g){g=g||h[3];e=e||[];h=+d||1;do k=k||".5",h/=k,f.style(c.elem,a,h+g);while(k!==(k=c.cur()/d)&&1!==k&&--l)}e&&(h=c.start=+h||+d||0,c.unit=g,c.end=e[1]?h+(e[1]+1)*e[2]:+e[2]);return c}]};
f.Animation=f.extend(wa,{tweener:function(a,b){f.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],za[c]=za[c]||[],za[c].unshift(b)},prefilter:function(a,b){b?La.unshift(a):La.push(a)}});f.speed=function(a,b,c){var d=a&&"object"===typeof a?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;
if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){f.isFunction(d.old)&&d.old.call(this);d.queue&&f.dequeue(this,d.queue)};return d};f.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ya).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=f.isEmptyObject(a),g=f.speed(b,c,d);b=function(){var b=wa(this,f.extend({},a),g);(e||B.get(this,"finish"))&&b.stop(!0)};b.finish=b;return e||!1===g.queue?this.each(b):this.queue(g.queue,
b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",g=f.timers,h=B.get(this);if(e)h[e]&&h[e].stop&&d(h[e]);else for(e in h)h[e]&&h[e].stop&&Xb.test(e)&&d(h[e]);for(e=g.length;e--;)g[e].elem!==this||null!=a&&g[e].queue!==a||(g[e].anim.stop(c),b=!1,g.splice(e,1));!b&&c||f.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b,
c=B.get(this),d=c[a+"queue"];b=c[a+"queueHooks"];var e=f.timers,g=d?d.length:0;c.finish=!0;f.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});f.each(["toggle","show","hide"],function(a,b){var c=f.fn[b];f.fn[b]=function(a,d,f){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(ka(b,!0),a,d,f)}});f.each({slideDown:ka("show"),
slideUp:ka("hide"),slideToggle:ka("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});f.timers=[];f.fx.tick=function(){var a,b=0,c=f.timers;for(pa=f.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||f.fx.stop();pa=void 0};f.fx.timer=function(a){f.timers.push(a);a()?f.fx.start():f.timers.pop()};f.fx.interval=13;f.fx.start=function(){Qa||(Qa=setInterval(f.fx.tick,f.fx.interval))};
f.fx.stop=function(){clearInterval(Qa);Qa=null};f.fx.speeds={slow:600,fast:200,_default:400};f.fn.delay=function(a,b){a=f.fx?f.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};(function(){var a=C.createElement("input"),b=C.createElement("select"),c=b.appendChild(C.createElement("option"));a.type="checkbox";I.checkOn=""!==a.value;I.optSelected=c.selected;b.disabled=!0;I.optDisabled=!c.disabled;a=C.createElement("input");a.value="t";
a.type="radio";I.radioValue="t"===a.value})();var pb,ba=f.expr.attrHandle;f.fn.extend({attr:function(a,b){return ha(this,f.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})}});f.extend({attr:function(a,b,c){var d,e,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if("undefined"===typeof a.getAttribute)return f.prop(a,b,c);1===g&&f.isXMLDoc(a)||(b=b.toLowerCase(),d=f.attrHooks[b]||(f.expr.match.bool.test(b)?pb:void 0));if(void 0!==c)if(null===c)f.removeAttr(a,
b);else{if(d&&"set"in d&&void 0!==(e=d.set(a,c,b)))return e;a.setAttribute(b,c+"");return c}else{if(d&&"get"in d&&null!==(e=d.get(a,b)))return e;e=f.find.attr(a,b);return null==e?void 0:e}}},removeAttr:function(a,b){var c,d,e=0,g=b&&b.match(W);if(g&&1===a.nodeType)for(;c=g[e++];)d=f.propFix[c]||c,f.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!I.radioValue&&"radio"===b&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}}});
pb={set:function(a,b,c){!1===b?f.removeAttr(a,c):a.setAttribute(c,c);return c}};f.each(f.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ba[b]||f.find.attr;ba[b]=function(a,b,d){var f,e;d||(e=ba[b],ba[b]=f,f=null!=c(a,b,d)?b.toLowerCase():null,ba[b]=e);return f}});var Yb=/^(?:input|select|textarea|button)$/i;f.fn.extend({prop:function(a,b){return ha(this,f.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[f.propFix[a]||a]})}});f.extend({propFix:{"for":"htmlFor",
"class":"className"},prop:function(a,b,c){var d,e,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!f.isXMLDoc(a))b=f.propFix[b]||b,e=f.propHooks[b];return void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||Yb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});I.optSelected||(f.propHooks.selected={get:function(a){(a=a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null}});
f.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){f.propFix[this.toLowerCase()]=this});var Wa=/[\t\r\n\f]/g;f.fn.extend({addClass:function(a){var b,c,d,e,g;b="string"===typeof a&&a;var h=0,k=this.length;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(W)||[];h<k;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Wa,
" "):" ")){for(g=0;e=b[g++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");d=f.trim(d);c.className!==d&&(c.className=d)}return this},removeClass:function(a){var b,c,d,e,g;b=0===arguments.length||"string"===typeof a&&a;var h=0,k=this.length;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(W)||[];h<k;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Wa," "):"")){for(g=0;e=b[g++];)for(;0<=d.indexOf(" "+e+" ");)d=
d.replace(" "+e+" "," ");d=a?f.trim(d):"";c.className!==d&&(c.className=d)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"===typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=f(this),g=a.match(W)||[];b=g[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else if("undefined"===c||"boolean"===c)this.className&&B.set(this,
"__className__",this.className),this.className=this.className||!1===a?"":B.get(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Wa," ").indexOf(a))return!0;return!1}});var Zb=/\r/g;f.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length)return d=f.isFunction(a),this.each(function(c){1===this.nodeType&&(c=d?a.call(this,c,f(this).val()):a,null==c?c="":"number"===typeof c?c+="":
f.isArray(c)&&(c=f.map(c,function(a){return null==a?"":a+""})),b=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))});if(e){if((b=f.valHooks[e.type]||f.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value")))return c;c=e.value;return"string"===typeof c?c.replace(Zb,""):null==c?"":c}}});f.extend({valHooks:{option:{get:function(a){var b=f.find.attr(a,"value");return null!=b?b:f.trim(f.text(a))}},select:{get:function(a){for(var b,
c=a.options,d=a.selectedIndex,e=(a="select-one"===a.type||0>d)?null:[],g=a?d+1:c.length,h=0>d?g:a?d:0;h<g;h++)if(b=c[h],!(!b.selected&&h!==d||(I.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&f.nodeName(b.parentNode,"optgroup"))){b=f(b).val();if(a)return b;e.push(b)}return e},set:function(a,b){for(var c,d,e=a.options,g=f.makeArray(b),h=e.length;h--;)if(d=e[h],d.selected=0<=f.inArray(d.value,g))c=!0;c||(a.selectedIndex=-1);return g}}}});f.each(["radio","checkbox"],
function(){f.valHooks[this]={set:function(a,b){if(f.isArray(b))return a.checked=0<=f.inArray(f(a).val(),b)}};I.checkOn||(f.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){return 0<arguments.length?this.on(b,
null,a,c):this.trigger(b)}});f.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Xa=f.now(),Ya=/\?/;f.parseJSON=function(a){return JSON.parse(a+"")};f.parseXML=function(a){var b,c;if(!a||"string"!==typeof a)return null;try{c=new DOMParser,
b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}b&&!b.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+a);return b};var $b=/#.*$/,qb=/([?&])_=[^&]*/,ac=/^(.*?):[ \t]*([^\r\n]*)$/mg,bc=/^(?:GET|HEAD)$/,cc=/^\/\//,rb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sb={},Va={},tb="*/".concat("*"),Za=a.location.href,ra=rb.exec(Za.toLowerCase())||[];f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Za,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ra[1]),
global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?xa(xa(a,
f.ajaxSettings),b):xa(f.ajaxSettings,a)},ajaxPrefilter:la(sb),ajaxTransport:la(Va),ajax:function(a,b){function c(a,b,h,n){var l,q,v,w;w=b;if(2!==B){B=2;k&&clearTimeout(k);d=void 0;g=n||"";z.readyState=0<a?4:0;n=200<=a&&300>a||304===a;if(h){v=r;for(var A=z,G,M,L,C,K=v.contents,I=v.dataTypes;"*"===I[0];)I.shift(),void 0===G&&(G=v.mimeType||A.getResponseHeader("Content-Type"));if(G)for(M in K)if(K[M]&&K[M].test(G)){I.unshift(M);break}if(I[0]in h)L=I[0];else{for(M in h){if(!I[0]||v.converters[M+" "+I[0]]){L=
M;break}C||(C=M)}L=L||C}L?(L!==I[0]&&I.unshift(L),v=h[L]):v=void 0}a:{h=r;G=v;M=z;L=n;var N,H,J,A={},K=h.dataTypes.slice();if(K[1])for(H in h.converters)A[H.toLowerCase()]=h.converters[H];for(C=K.shift();C;)if(h.responseFields[C]&&(M[h.responseFields[C]]=G),!J&&L&&h.dataFilter&&(G=h.dataFilter(G,h.dataType)),J=C,C=K.shift())if("*"===C)C=J;else if("*"!==J&&J!==C){H=A[J+" "+C]||A["* "+C];if(!H)for(N in A)if(v=N.split(" "),v[1]===C&&(H=A[J+" "+v[0]]||A["* "+v[0]])){!0===H?H=A[N]:!0!==A[N]&&(C=v[0],K.unshift(v[1]));
break}if(!0!==H)if(H&&h["throws"])G=H(G);else try{G=H(G)}catch(O){v={state:"parsererror",error:H?O:"No conversion from "+J+" to "+C};break a}}v={state:"success",data:G}}if(n)r.ifModified&&((w=z.getResponseHeader("Last-Modified"))&&(f.lastModified[e]=w),(w=z.getResponseHeader("etag"))&&(f.etag[e]=w)),204===a||"HEAD"===r.type?w="nocontent":304===a?w="notmodified":(w=v.state,l=v.data,q=v.error,n=!q);else if(q=w,a||!w)w="error",0>a&&(a=0);z.status=a;z.statusText=(b||w)+"";n?E.resolveWith(u,[l,w,z]):E.rejectWith(u,
[z,w,q]);z.statusCode(D);D=void 0;m&&x.trigger(n?"ajaxSuccess":"ajaxError",[z,r,n?l:q]);F.fireWith(u,[z,w]);m&&(x.trigger("ajaxComplete",[z,r]),--f.active||f.event.trigger("ajaxStop"))}}"object"===typeof a&&(b=a,a=void 0);b=b||{};var d,e,g,h,k,l,m,q,r=f.ajaxSetup({},b),u=r.context||r,x=r.context&&(u.nodeType||u.jquery)?f(u):f.event,E=f.Deferred(),F=f.Callbacks("once memory"),D=r.statusCode||{},A={},G={},B=0,L="canceled",z={readyState:0,getResponseHeader:function(a){var b;if(2===B){if(!h)for(h={};b=
ac.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===B?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();B||(a=G[c]=G[c]||a,A[a]=b);return this},overrideMimeType:function(a){B||(r.mimeType=a);return this},statusCode:function(a){var b;if(a)if(2>B)for(b in a)D[b]=[D[b],a[b]];else z.always(a[z.status]);return this},abort:function(a){a=a||L;d&&d.abort(a);c(0,a);return this}};E.promise(z).complete=F.add;z.success=z.done;
z.error=z.fail;r.url=((a||r.url||Za)+"").replace($b,"").replace(cc,ra[1]+"//");r.type=b.method||b.type||r.method||r.type;r.dataTypes=f.trim(r.dataType||"*").toLowerCase().match(W)||[""];null==r.crossDomain&&(l=rb.exec(r.url.toLowerCase()),r.crossDomain=!(!l||l[1]===ra[1]&&l[2]===ra[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ra[3]||("http:"===ra[1]?"80":"443"))));r.data&&r.processData&&"string"!==typeof r.data&&(r.data=f.param(r.data,r.traditional));Ha(sb,r,b,z);if(2===B)return z;(m=f.event&&r.global)&&
0===f.active++&&f.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!bc.test(r.type);e=r.url;r.hasContent||(r.data&&(e=r.url+=(Ya.test(e)?"&":"?")+r.data,delete r.data),!1===r.cache&&(r.url=qb.test(e)?e.replace(qb,"$1_="+Xa++):e+(Ya.test(e)?"&":"?")+"_="+Xa++));r.ifModified&&(f.lastModified[e]&&z.setRequestHeader("If-Modified-Since",f.lastModified[e]),f.etag[e]&&z.setRequestHeader("If-None-Match",f.etag[e]));(r.data&&r.hasContent&&!1!==r.contentType||b.contentType)&&z.setRequestHeader("Content-Type",
r.contentType);z.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+tb+"; q=0.01":""):r.accepts["*"]);for(q in r.headers)z.setRequestHeader(q,r.headers[q]);if(r.beforeSend&&(!1===r.beforeSend.call(u,z,r)||2===B))return z.abort();L="abort";for(q in{success:1,error:1,complete:1})z[q](r[q]);if(d=Ha(Va,r,b,z)){z.readyState=1;m&&x.trigger("ajaxSend",[z,r]);r.async&&0<r.timeout&&(k=setTimeout(function(){z.abort("timeout")},r.timeout));
try{B=1,d.send(A,c)}catch(C){if(2>B)c(-1,C);else throw C;}}else c(-1,"No Transport");return z},getJSON:function(a,b,c){return f.get(a,b,c,"json")},getScript:function(a,b){return f.get(a,void 0,b,"script")}});f.each(["get","post"],function(a,b){f[b]=function(a,c,d,e){f.isFunction(c)&&(e=e||d,d=c,c=void 0);return f.ajax({url:a,type:b,dataType:e,data:c,success:d})}});f._evalUrl=function(a){return f.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})};f.fn.extend({wrapAll:function(a){var b;
if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});this[0]&&(b=f(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=
f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()}});f.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight};f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)};var dc=/%20/g,Hb=/\[\]$/,ub=/\r?\n/g,ec=/^(?:submit|button|image|reset|file)$/i,fc=/^(?:input|select|textarea|keygen)/i;f.param=function(a,b){var c,
d=[],e=function(a,b){b=f.isFunction(b)?b():null==b?"":b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};void 0===b&&(b=f.ajaxSettings&&f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(c in a)da(c,a[c],b,e);return d.join("&").replace(dc,"+")};f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=f.prop(this,"elements");return a?
f.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!f(this).is(":disabled")&&fc.test(this.nodeName)&&!ec.test(a)&&(this.checked||!hb.test(a))}).map(function(a,b){var c=f(this).val();return null==c?null:f.isArray(c)?f.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});f.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var gc=0,Ra={},hc={0:200,1223:204},Da=f.ajaxSettings.xhr();a.attachEvent&&
a.attachEvent("onunload",function(){for(var a in Ra)Ra[a]()});I.cors=!!Da&&"withCredentials"in Da;I.ajax=Da=!!Da;f.ajaxTransport(function(a){var b;if(I.cors||Da&&!a.crossDomain)return{send:function(c,d){var f,e=a.xhr(),g=++gc;e.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(f in a.xhrFields)e[f]=a.xhrFields[f];a.mimeType&&e.overrideMimeType&&e.overrideMimeType(a.mimeType);a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(f in c)e.setRequestHeader(f,
c[f]);b=function(a){return function(){b&&(delete Ra[g],b=e.onload=e.onerror=null,"abort"===a?e.abort():"error"===a?d(e.status,e.statusText):d(hc[e.status]||e.status,e.statusText,"string"===typeof e.responseText?{text:e.responseText}:void 0,e.getAllResponseHeaders()))}};e.onload=b();e.onerror=b("error");b=Ra[g]=b("abort");try{e.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h;}},abort:function(){b&&b()}}});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){f.globalEval(a);return a}}});f.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});f.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=f("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&e("error"===a.type?404:200,a.type)});C.head.appendChild(b[0])},abort:function(){c&&c()}}}});
var vb=[],$a=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=vb.pop()||f.expando+"_"+Xa++;this[a]=!0;return a}});f.ajaxPrefilter("json jsonp",function(b,c,d){var e,g,h,k=!1!==b.jsonp&&($a.test(b.url)?"url":"string"===typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&$a.test(b.data)&&"data");if(k||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,k?b[k]=b[k].replace($a,"$1"+
e):!1!==b.jsonp&&(b.url+=(Ya.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){h||f.error(e+" was not called");return h[0]},b.dataTypes[0]="json",g=a[e],a[e]=function(){h=arguments},d.always(function(){a[e]=g;b[e]&&(b.jsonpCallback=c.jsonpCallback,vb.push(e));h&&f.isFunction(g)&&g(h[0]);h=g=void 0}),"script"});f.parseHTML=function(a,b,c){if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=!1);b=b||C;var d=gb.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];
d=f.buildFragment([a],b,c);c&&c.length&&f(c).remove();return f.merge([],d.childNodes)};var wb=f.fn.load;f.fn.load=function(a,b,c){if("string"!==typeof a&&wb)return wb.apply(this,arguments);var d,e,g,h=this,k=a.indexOf(" ");0<=k&&(d=f.trim(a.slice(k)),a=a.slice(0,k));f.isFunction(b)?(c=b,b=void 0):b&&"object"===typeof b&&(e="POST");0<h.length&&f.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){g=arguments;h.html(d?f("<div>").append(f.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){h.each(c,
g||[a.responseText,b,a])});return this};f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}});f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length};var xb=a.document.documentElement;f.offset={setOffset:function(a,b,c){var d,e,g,h=f.css(a,"position"),k=f(a),l={};"static"===h&&(a.style.position="relative");g=k.offset();e=f.css(a,"top");d=f.css(a,"left");("absolute"===h||
"fixed"===h)&&-1<(e+d).indexOf("auto")?(d=k.position(),e=d.top,d=d.left):(e=parseFloat(e)||0,d=parseFloat(d)||0);f.isFunction(b)&&(b=b.call(a,c,g));null!=b.top&&(l.top=b.top-g.top+e);null!=b.left&&(l.left=b.left-g.left+d);"using"in b?b.using.call(a,l):k.css(l)}};f.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){f.offset.setOffset(this,a,b)});var b,c;c=this[0];var d={top:0,left:0},e=c&&c.ownerDocument;if(e){b=e.documentElement;if(!f.contains(b,c))return d;
"undefined"!==typeof c.getBoundingClientRect&&(d=c.getBoundingClientRect());c=ea(e);return{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};"fixed"===f.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),f.nodeName(a[0],"html")||(d=a.offset()),d.top+=f.css(a[0],"borderTopWidth",!0),d.left+=f.css(a[0],"borderLeftWidth",!0));return{top:b.top-d.top-f.css(c,"marginTop",!0),
left:b.left-d.left-f.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||xb;a&&!f.nodeName(a,"html")&&"static"===f.css(a,"position");)a=a.offsetParent;return a||xb})}});f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;f.fn[b]=function(e){return ha(this,function(b,e,f){var g=ea(b);if(void 0===f)return g?g[c]:b[e];g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f},b,e,arguments.length,null)}});
f.each(["top","left"],function(a,b){f.cssHooks[b]=ia(I.pixelPosition,function(a,c){if(c)return c=O(a,b),Ua.test(c)?f(a).position()[b]+"px":c})});f.each({Height:"height",Width:"width"},function(a,b){f.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){f.fn[d]=function(d,e){var g=arguments.length&&(c||"boolean"!==typeof d),h=c||(!0===d||!0===e?"margin":"border");return ha(this,function(b,c,d){return f.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,
Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===d?f.css(b,c,h):f.style(b,c,d,h)},b,g?d:void 0,g,null)}})});f.fn.size=function(){return this.length};f.fn.andSelf=f.fn.addBack;"function"===typeof define&&define.amd&&define("jquery",[],function(){return f});var ic=a.jQuery,jc=a.$;f.noConflict=function(b){a.$===f&&(a.$=jc);b&&a.jQuery===f&&(a.jQuery=ic);return f};"undefined"===typeof b&&(a.jQuery=a.$=f);return f});var \u03c0=Math.PI,\u03c4=2*\u03c0;
(function(a){for(var b in a)if(!window[b])throw"Error: MathBox requires "+a[b];})({THREE:"Three.js",tQuery:"tQuery.js (bundle)",ThreeBox:"ThreeBox.js",ThreeRTT:"ThreeRTT.js"});window.MathBox={};window.mathBox=function(a,b){!a||a instanceof Node||(b=a,a=null);return tQuery.createWorld(b).mathBox(a,b)};MathBox.getShader=function(a){var b=document.getElementById(a);return b&&b.textContent||a};Math.sign=function(a){return 0<a?1:0>a?-1:0};MathBox.loop=function(a,b){for(var c=0;c<a;++c)b(c)};
MathBox.Attributes=function(){};
MathBox.Attributes.prototype={get:function(a){return void 0===a?this.__attributes||{}:this.__attributes?this.__attributes[a]:void 0},set:function(a,b){function c(a,b){try{b=m(a,b),e[a]=b,k[a]=b}catch(c){throw"Exception setting '"+a+"' to '"+b+"': "+c;}}this.__attributes||(this.__attributes={});this.__validators||(this.__validators={});var e={},d=this.__validators,k=this.__attributes,q=this,m=function(a,b){if(void 0===d[a]){var c="validate"+a.charAt(0).toUpperCase()+a.slice(1);d[a]=q[c]||!1}return d[a]?
d[a].call(this,b):b}.bind(this);void 0!==a&&null!==a&&(a.constructor==String?c(a,b):_.each(a,function(a,b){c(b,a)}),this.emit("change",e))}};MicroEvent.mixin(MathBox.Attributes);MathBox.Attributes.mixin=function(a){_.each(["get","set","on","emit"],function(b){a.prototype[b]=MathBox.Attributes.prototype[b]})};MathBox.Animator=function(){this.active=[]};MathBox.Animator.now=1;
MathBox.Animator.prototype={finalState:function(a){var b=_.extend({},a.get());a.__queue&&_.each(a.__queue,function(a,e){_.each(a,function(a){a.to&&(b[e]=a.to)})});return b},attach:function(a){if(!a.__queue){if(!a.__attributes)throw"Cannot attach to object without attributes";var b=this,c=a.set;a.set=function(a,d,k){if(!k){k=a;if(void 0===a||null===a)return;a.constructor==String&&(k={},k[a]=d);b.stop(this,k)}c.call(this,a,d)};a.__queue={};a.__animations=0}},hurry:function(a,b,c){c=c||4;_.each(b||a.__queue,
function(b,d){_.each(a.__queue[d],function(a){a.hurry(c)})}.bind(this))},stop:function(a,b){_.each(b||a.__queue,function(b,e){for(;a.__queue[e];)this.dequeue(a,e,!0)}.bind(this))},animate:function(a,b,c){c=_.extend({duration:300},c||{});this.attach(a);_.each(b,function(b,d){var k=a.__queue[d]=a.__queue[d]||[];if(c.delay){var q=new MathBox.Animator.Delay(a,d,c.delay);k.push(q);0==a.__animations++&&this.active.push(a)}a.__validators[d]&&(b=a.__validators[d].call(a,b));q=new MathBox.Animator.Animation(a,
d,b,c.duration,c.callback,c.ease);k.push(q);c.hold&&(q=new MathBox.Animator.Delay(a,d,c.hold),k.push(q),0==a.__animations++&&this.active.push(a));0==a.__animations++&&this.active.push(a)}.bind(this))},dequeue:function(a,b,c){var e=a.__queue[b];if(e){var d=e.shift();0==e.length&&delete a.__queue[b];c&&d.skip();0==--a.__animations&&this.active.splice(this.active.indexOf(a),1)}},update:function(a){MathBox.Animator.now+=a;a=this.active.slice();_.each(a,function(a){var c=0;_.each(a.__queue,function d(k,
q){var m=k[0];value=m.apply(c||0);m.done()&&(c=m.extra(),this.dequeue(a,q),k[0]&&d.call(this,k,q))}.bind(this))}.bind(this))}};MathBox.Animator.Delay=function(a,b,c){this.object=a;this.key=b;this.duration=c;this.fraction=this.start=0};
MathBox.Animator.Delay.prototype={init:function(a){this.start=MathBox.Animator.now-(a||0)},apply:function(a){this.start||this.init(a);this.fraction=0<this.duration?Math.min(1,(MathBox.Animator.now-this.start)/this.duration):1},skip:function(){this.duration=0},hurry:function(a){this.duration=this.duration*this.fraction+this.duration*(1-this.fraction)/a},extra:function(){return MathBox.Animator.now-this.start-this.duration},done:function(){return 1==this.fraction}};
MathBox.Animator.Animation=function(a,b,c,e,d,k){this.object=a;this.key=b;this.from=null;this.to=c;this.duration=e;this.fraction=this.start=0;this.callback=d;this.ease=k};
MathBox.Animator.Animation.prototype={init:function(a){this.start=MathBox.Animator.now-(a||0);null===this.from&&(this.from=this.object.get(this.key));void 0===this.from&&(this.from=0)},apply:function(a){function b(a,b){return a+(b-a)*h}function c(a,d){void 0===d&&(d=a);void 0===a&&(a=d);if(d===a)return a;if(typeof a!=typeof d)throw console.log(e,k),"Data type mismatch between from/to values in animator. "+k+": "+a+" ("+a.constructor+"), "+d+"("+d.constructor+")";var h;switch(typeof d){default:case "string":throw"Unimplemented value type in animator. ("+
typeof d+")";case "function":return function(){return c(a.apply(this,arguments),d.apply(this,arguments))};case "boolean":return.5<m?d:a;case "number":return b(a,d);case "object":if(!a)return d;if(!d)return a;if(d.constructor==Array)return h=[],MathBox.loop(a.length,function(b){h[b]=c(a[b],d[b])}),h;if(d.constructor==THREE.Matrix4){h=new THREE.Matrix4;for(var q=0;16>q;++q)h.elements[q]=b(a.elements[q],d.elements[q]);return h}return d.constructor==THREE.Vector3?(h=new THREE.Vector3,h.x=b(a.x,d.x),h.y=
b(a.y,d.y),h.z=b(a.z,d.z),h):d.constructor==THREE.Color?(h=new THREE.Color,h.r=b(a.r,d.r),h.g=b(a.g,d.g),h.b=b(a.b,d.b),h):.5<m?d:a}}this.start||this.init(a);var e=this.object;a=this.from;var d=this.to,k=this.key,q=this.ease,m;this.fraction=m=0<this.duration?Math.min(1,(MathBox.Animator.now-this.start)/(this.duration||1)):1;var h;switch(q){case "in":h=1-(1-m)*(1-m);break;case "out":h=m*m;break;case "linear":h=m;break;default:h=.5-.5*Math.cos(m*\u03c0)}a=c(a,d);this.object.set(this.key,a,!0)},hurry:function(a){this.duration=
this.duration*this.fraction+this.duration*(1-this.fraction)/a},skip:function(){this.duration=0;this.fraction=1;this.done()},extra:function(){return MathBox.Animator.now-this.start-this.duration},done:function(){return 1==this.fraction?(this.object.set(this.key,this.to,!0),this.callback&&this.callback(),this.callback=null,!0):!1}};
MathBox.Stage=function(a,b,c){this.options=a=a||{};this._world=b;this.overlay=c;b&&b.on("resize",function(a,b){this.overlay.size(a,b);this.width=a;this.height=b}.bind(this));this.primitives=[];this.materials=new MathBox.Materials(this);this.animator=new MathBox.Animator;this._transition=0;this._speed=1;b&&(this.cameraProxy=new MathBox.CameraProxy(b,this.options));this.viewport({});this.loadPrimitives();void 0!==a.transition&&this.transition(a.transition);void 0!==a.speed&&this.speed(a.speed)};
MathBox.Stage.prototype=new THREE.Object3D;MathBox.Attributes.mixin(MathBox.Stage);MicroEvent.mixin(MathBox.Stage);
MathBox.Stage.prototype=_.extend(MathBox.Stage.prototype,{update:function(){var a=this._viewport,b=this._world.tCamera(),c=this.width,e=this.height,d=this._speed;this.cameraProxy.update();var k=+new Date;this.last||(this.last=k-1E3/60);this.animator.update(d*(k-this.last));this.last=k;a.update(this);_.each(this.primitives,function(d){d.adjust(a,b,c,e,this);d=d.renderables();_.each(d,function(d){d.isVisible()&&d.adjust(a,b,c,e,this)}.bind(this))}.bind(this));this.overlay&&this.overlay.update(b)},add:function(a,
b){if(a instanceof THREE.Object3D)return a instanceof MathBox.Sprite?this.overlay.add(a):THREE.Object3D.prototype.add.call(this,a);this._add(a);b=this.animateOptions(b);var c=a.style.get("opacity");b&&0<c&&(a.style.set("opacity",0),this.animator.animate(a.style,{opacity:c},b));return this},remove:function(a,b){if(a instanceof THREE.Object3D)return a instanceof MathBox.Sprite?this.overlay.remove(a):THREE.Object3D.prototype.remove.call(this,a);if("string"==typeof a)return _.each(this.select(a),function(a){this.remove(a,
b)}.bind(this));if(!a.singleton){var c=function(){this._remove(a)}.bind(this);b=this.animateOptions(b);var e=a.style.get("opacity");b&&0<e?(b.callback=c,this.animator.animate(a.style,{opacity:0},b),a.removed=!0):c();return this}},_add:function(a){var b=this.materials;-1==this.primitives.indexOf(a)&&(this.primitives.push(a),a.make(),a=a.renderables(),_.each(a,function(a){a.make(b);a.object&&this.add(a.object)}.bind(this)))},_remove:function(a){if(-1!=this.primitives.indexOf(a)){this.primitives.splice(this.primitives.indexOf(a),
1);var b=a.renderables();_.each(b,function(a){a.object&&this.remove(a.object);a.destroy()}.bind(this));a.destroy()}},select:function(a,b){var c=[];if("object"==typeof a)return a.constructor==Array?a:[a];var e=function(a){var c=[];if("*"==a)return c=this.primitives.slice(),c.push(this.viewport()),c.push(this.cameraProxy),c;if(a==+a)return _.each(this.primitives,function(e){!b&&e.removed||e.get("sequence")!=a||c.push(e)}),c;var e=a.match(/^\s*#([a-zA-Z0-9_-]+)|([a-zA-Z0-9_-]+)?\s*$/);if(!e)return[];
var m=e[2],h=e[1];if(h)_.each(this.primitives,function(a){!b&&a.removed||a.get("id")!=h||c.push(a)});else{if("camera"==m)return this.cameraProxy&&[this.cameraProxy]||[];if("viewport"==m)return[this.viewport()];m&&_.each(this.primitives,function(a){!b&&a.removed||a.type()!=m||c.push(a)})}return c}.bind(this),c=[];a=(""+a).split(",");_.each(a,function(a){c=c.concat(e(a))});return c},set:function(a,b){b=this.extractStyle(b);_.each(this.select(a),function(a){a.set(b);b.style&&a.style.set(b.style)});return this},
get:function(a){var b=this.animator;a=this.select(a);if(1>a.length)return{};var c=a[0];a=b.finalState(c);c.style&&(b=b.finalState(c.style),a.style=b);return a},transition:function(a){return void 0!==a?(this._transition=a,this):this._transition},speed:function(a){return void 0!==a?(this._speed=a,this):this._speed},animateOptions:function(a,b){var c=this._transition;!0===a&&(a={});if(c||b||a&&(a.delay||a.duration||a.hold))a=_.extend({delay:0,duration:c||0,hold:0},a||{});if(a&&(a.delay||a.duration||
a.hold))return a},animate:function(a,b,c){var e=this.animator;b=this.extractStyle(b);c=this.animateOptions(c,!0);b.style&&(_.each(this.select(a),function(a){c?e.animate(a.style,b.style,c):a.style.set(b.style)}),b=_.extend({},b),delete b.style);_.each(this.select(a),function(a){c?e.animate(a,b,c):a.set(b)});return this},clone:function(a,b,c){_.each(this.select(a),function(a){var d=this.get(a);delete d.sequence;var k=_.extend({},b),q=[];_.each(b,function(a,c){if("id"==c||"boolean"==typeof a||null===
a)d[c]=b[c],q.push(c)});_.each(q,function(a){delete k[a]});d.id==a.get("id")&&(d.id=(d.id||"")+"-clone");a=this.spawn(a.type(),d,{duration:0});this.animate(a,k,c)}.bind(this));return this},hurry:function(a,b,c){var e=this.animator;_.each(this.select(a,!0),function(a){e.hurry(a,b,c);a.style&&e.hurry(a.style,b,c)});return this},halt:function(a,b){var c=this.animator;_.each(this.select(a,!0),function(a){c.stop(a,b);a.style&&c.stop(a.style,b)});return this},viewport:function(a){if(void 0!==a){if(!this._viewport||
a.type&&a.type!=this.options.viewport.type){this._viewport&&(a=_.extend({},this._viewport.get(),a));this._viewport=MathBox.Viewport.make(a);a=this.primitives.slice();var b=this;_.each(a,function(a){b._remove(a);b._add(a)})}else this._viewport.set(a);this.options.viewport=this._viewport.get();return this}return this._viewport},camera:function(a){_.each(this.select("camera"),function(b){b.set(a)});return this},start:function(){this._world&&this._world.start();return this},stop:function(){this._world&&
this._world.stop();return this},world:function(){return this._world},extractStyle:function(a){var b=MathBox.Style.prototype.defaults(),c=null;_.each(a,function(e,d){void 0!==b[d]&&(delete a[d],c=c||{},c[d]=e)});c&&(a.style=_.extend(a.style||{},c));return a},spawn:function(a,b,c){return MathBox.Primitive.types[a]?(this[a](b,c),this.primitives[this.primitives.length-1]):this},loadPrimitives:function(){_.each(MathBox.Primitive.types,function(a,b){this[b]=function(b,e){a.validateArgs&&(b=a.validateArgs(b));
var d=new a(this.extractStyle(b));this.add(d,e);return this}}.bind(this))}});MathBox.Materials=function(a){this.stage=a;this.cache={}};
MathBox.Materials.prototype={hash:function(a){var b=Object.keys(a),c="";b.sort();_.each(b,function(b){c+=b+"/";c+=a[b]+"/"});return c},clone:function(a){var b=new THREE.ShaderMaterial({vertexShader:a.vertexShader,fragmentShader:a.fragmentShader});b.attributes=a.attributes?{}:null;b.uniforms={};b.wireframe=a.wireframe;b.applyUniforms=a.applyUniforms;b.applyAttributes=a.applyAttributes;_.each(a.uniforms,function(a,e){b.uniforms[e]={type:a.type,value:a.value&&a.value.clone?a.value.clone():a.value}});
_.each(a.attributes,function(a,e){b.attributes[e]={type:a.type,value:a.value}});return b},generic:function(a){a=a||{};if(!a.shaders||!Object.keys(a.shaders).length){var b=this.hash(a);if(this.cache[b])return this.clone(this.cache[b])}var c=this.factory(),e=a.shaders||{};e.position?e.position(c,this):(this.position(c,a),a.absolute||(a.shaded&&a.smooth?(c.group(),this.viewport(c),c.next(),this.viewport(c),c.next(),this.viewport(c),c.combine()):this.viewport(c)));a=this.finalize(c,a);b&&(this.cache[b]=
a);return a},position:function(a,b){b=b||{};a.snippet(b.shaded&&b.smooth?"getPositionDUDV":"getPosition");b.absolute||(b.shaded&&b.smooth?a.group().snippet("mathTransform").next().snippet("mathTransform").next().snippet("mathTransform").combine():a.snippet("mathTransform"));return a},factory:function(){return new ShaderGraph.Factory},finalize:function(a,b){b=b||{};var c=b.shaders||{};b.shaded?b.smooth?a.snippet("projectToViewDUDV"):a.snippet("projectToViewNormal"):a.snippet("projectToView");c.material?
c.material(a,this):a.material("vertexOutput",{points:"fragmentSolidPoint",mesh:b.shaded?"fragmentShaded":"fragmentSolid"}[b.type]||"fragmentSolid");c=a.end().compile();c=new THREE.ShaderMaterial({uniforms:c.uniforms,attributes:c.attributes,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader});b.wireframe&&(c.wireframe=!0);var e=this.apply.bind(this);c.applyUniforms=function(a){e(this,a,"uniforms")};c.applyAttributes=function(a){e(this,a,"attributes")};return c},apply:function(a,b,c){var e=
a[c];_.each(b,function(a,b){var c=e[b];c&&(a instanceof THREE.Color&&(a.x=a.r,a.y=a.g,a.z=a.b),c.value=a,c.needsUpdate=!0)});if("uniforms"==c){c=a.uniforms;if(b.map&&(c.texture&&(c.texture.value=b.map),c.offsetRepeat)){var d=b.map.offset,k=b.map.repeat;c.offsetRepeat.value.set(d.x,d.y,k.x,k.y)}void 0!==b.lineWidth&&(a.wireframeLinewidth=a.linewidth=b.lineWidth);void 0!==b.opacity&&(a.transparent=1>b.opacity)}},viewport:function(a,b){this.stage.viewport().shader(a,b)}};
MathBox.Ticks=function(a,b,c,e,d,k,q){var m=(b-a)/(c||10);e=e||1;d=d||10;var h=e*((q||0)+Math.pow(d,Math.floor(Math.log(m/e)/Math.log(d))));c=_.map(0==d%2?[d/2,1,.5]:[1],function(a){return h*a});var l=_.reduce(c,function(a,b){return Math.abs(b-m)<Math.abs(a-m)?b:a},h);k=+!k;a=(Math.ceil(a/l)+k)*l;b=(Math.floor(b/l)-k)*l;c=Math.ceil((b-a)/l)+1;var u=[];MathBox.loop(c,function(b){u.push(a+b*l)});return u};MathBox.TicksLog=function(a,b,c,e,d,k){};
tQuery.World.registerInstance("mathBox",function(a,b){a=a||document.body;this.threeBox(a,b);var c=new MathBox.Overlay;a.appendChild(c.domElement);c.domElement.style.position="absolute";c.domElement.style.left=0;c.domElement.style.top=0;c.domElement.style.right=0;c.domElement.style.bottom=0;var e=new MathBox.Stage(b,this,c),d=function(){e.update()};this.tScene().add(e);this._tRenderer.setClearColor(16777215,1);e.unhook=function(){this.loop().unhookPreRender(d)};this.loop().hookPreRender(d);b.cameraControls||
(c=this.tCamera(),c.position.x=0,c.position.y=0,c.position.z=b.orbit,c.lookAt(new THREE.Vector3(0,0,0)));return e});MathBox.Director=function(a,b){this._stage=a;this.script=b||[];this.rollback={};this.clocks={};this.time=this.lastCommand=this.step=0;this.lastTime=+new Date};
MathBox.Director.prototype={clock:function(a,b){if(a>this.step)return 0;var c=+new Date;this.time+=(c-this.lastTime)*this.stage().speed();this.lastTime=c;if(b||!this.clocks[a])this.clocks[a]=this.time;return.001*(this.time-this.clocks[a])},invert:function(a){var b=this._stage,c=[],e,d=a[0],k=a[1],q=a[2]||{},m=a[3];"remove"==d&&(m=q);m={delay:m&&void 0!==m.hold?m.hold/4:0,duration:m&&void 0!==m.duration?m.duration/4:0,hold:m&&void 0!==m.delay?m.delay/4:0};switch(d){case "add":e=[0];case "clone":e=
e||b.select(k);_.each(e,function(a,b){c.push(["remove",q.sequence||MathBox.Primitive.sequence+1+b,m])});break;case "remove":e=b.select(k);_.each(e,function(a){c.push(["add",a.type(),b.get(a),m])});break;case "animate":case "set":e=b.select(k),_.each(e,function(a){var e=b.get(a),k={};for(i in q)k[i]=e.style&&void 0!==e.style[i]?e.style[i]:e[i];c.push([d,a.singleton||a.get("sequence"),k,m])})}return c},invertDelay:function(a){function b(a){var b=a[2]||{},c=["opacity"];if("animate"==a[0])for(e in c=
[],b)if("style"==e)for(j in b.style)c.push(j);else c.push(e);return c}var c=[],e,d={};a.forEach(function(a){var c=a[0],e=a[1]||"",k=a[2]||{},q=a[3]||{};if("set"==c)return null;"add"==c&&(e=k.sequence);"remove"==c&&(q=k);b(a).forEach(function(a){a=[e,a].join(".");d[a]||(d[a]=[]);q=q||{};d[a].push((q.delay||0)+(q.duration||0)+(q.hold||0))})});var k=0;for(e in d)var q=d[e]=d[e].reduce(function(a,b){return a+b}),k=Math.max(k,q);a.forEach(function(a){var e=a[0],l=a[1]||"",q=a[2]||{},r=a[3]||{},x;if("set"==
e)return c.push(a);"add"==e&&(x=l,l=q.sequence);"remove"==e&&(r=q);b(a).forEach(function(a){var b=[l,a].join("."),m=r.delay||0,G=r.duration||0,g=r.hold||0;void 0!==d[b]&&(m+=k-d[b],delete d[b]);r={delay:m,duration:G,hold:g};"add"==e&&c.push([e,x,q,r]);"remove"==e?c.push([e,l,r]):(b={},b[a]=q.style&&void 0!==q.style[a]?q.style[a]:q[a],c.push([e,l,b,r]))})});return c},apply:function(a,b,c,e){var d=this._stage;_.each(a,function(a){var q=a[0]||"",m=a[1]||"",h=a[2]||{},l=a[3]||{};"remove"==q&&(l=h);b&&
(a=this.invert(a),a=[0,0].concat(a),Array.prototype.splice.apply(b,a));e&&l&&(l=_.extend({},l),l.delay/=2,l.duration/=2,l.hold/=2);c&&(l={delay:0,duration:0,hold:0},"animate"==q&&(q="set"));switch(q){case "clone":d.clone(m,h,l);break;case "add":d.spawn(m,h,l);break;case "remove":_.each(d.select(m),function(a){d.remove(a,l)});break;case "set":var q=d.select(m),u=h.constructor==Array;_.each(q,function(a,b){d.set(a,u?h[b]:h)});break;case "animate":q=d.select(m),u=h.constructor==Array,_.each(q,function(a,
b){d.animate(a,u?h[b]:h,l)})}}.bind(this));return this},insert:function(a){a[0].constructor!=Array&&(a=[a]);this.script.splice(this.step,0,a);this.forward();return this},is:function(a){if(!this.script.length)return!1;for(;0>a;)a+=this.script.length+1;for(;a>=this.script.length+1;)a-=this.script.length+1;return a==this.step},isFirst:function(){return this.is(0)},isLast:function(){return this.is(-1)},go:function(a,b){if(this.script.length){for(;0>a;)a+=this.script.length+1;for(;a>=this.script.length+
1;)a-=this.script.length+1;for(;a>this.step;)this.forward(b);for(;a<this.step;)this.back(b)}},skipping:function(){var a=+new Date,b=!1;500>a-this.lastCommand&&(b=!0);this.stage().hurry("*");this.lastCommand=a;return b},forward:function(a,b){if(!(this.step>=this.script.length)){var c=this.step,e=this.script[c],d=this.rollback[c]=[];this.step++;var k=function(){this.apply(e,d,a,a?!1:this.skipping());this.rollback[c]=this.invertDelay(d);this.clock(c+1,!0);this.emit("go",c+1,1)}.bind(this);b?setTimeout(k,
+b):k();return this}},back:function(a,b){if(!(0>=this.step)){this.step--;var c=this.step,e=this.rollback[c],d=function(){this.apply(e,null,a||this.skipping());delete this.rollback[c];this.emit("go",c,-1)}.bind(this);b?setTimeout(d,+b):d();return this}},stage:function(){return this._stage}};_.each(MathBox.Stage.prototype,function(a,b){MathBox.Director.prototype[b]||(MathBox.Director.prototype[b]=function(){var b=this.stage[a].apply(this.stage,arguments);return b===this.stage?this:b})});MicroEvent.mixin(MathBox.Director);
MathBox.Style=function(a){var b=this.defaults();a=_.extend(b,a||{});this.set(a)};
MathBox.Style.prototype={defaults:function(){return{color:new THREE.Color(3178736),opacity:1,lineWidth:2,pointSize:5,mathScale:new THREE.Vector3(1,1,1),mathRotation:new THREE.Vector3,mathPosition:new THREE.Vector3,worldScale:new THREE.Vector3(1,1,1),worldRotation:new THREE.Vector3,worldPosition:new THREE.Vector3,zIndex:0,map:null,mapColor:0,mapOpacity:0}},validateColor:function(a){if(a.constructor==Array){a=a.concat([0,0,0]);var b=new THREE.Color;return b.setRGB.apply(b,a)}return a.constructor==Number?
new THREE.Color(a):a.constructor!=THREE.Color?this.get("color"):a},validateMathScale:function(a){if(a.constructor==Array){a=a.concat([1,1,1]);var b=new THREE.Vector3;return b.set.apply(b,a)}return a.constructor!=THREE.Vector3?this.get("mathScale"):a},validateMathRotation:function(a){if(a.constructor==Array){a=a.concat([0,0,0]);var b=new THREE.Vector3;return b.set.apply(b,a)}return a.constructor!=THREE.Vector3?this.get("mathRotation"):a},validateMathPosition:function(a){if(a.constructor==Array){a=
a.concat([0,0,0]);var b=new THREE.Vector3;return b.set.apply(b,a)}return a.constructor!=THREE.Vector3?this.get("mathPosition"):a},validateWorldScale:function(a){if(a.constructor==Array){a=a.concat([1,1,1]);var b=new THREE.Vector3;return b.set.apply(b,a)}return a.constructor!=THREE.Vector3?this.get("worldScale"):a},validateWorldRotation:function(a){if(a.constructor==Array){a=a.concat([0,0,0]);var b=new THREE.Vector3;return b.set.apply(b,a)}return a.constructor!=THREE.Vector3?this.get("worldRotation"):
a},validateWorldPosition:function(a){if(a.constructor==Array){a=a.concat([0,0,0]);var b=new THREE.Vector3;return b.set.apply(b,a)}return a.constructor!=THREE.Vector3?this.get("worldPosition"):a}};MathBox.Attributes.mixin(MathBox.Style);
MathBox.CameraProxy=function(a,b){this.set({orbit:void 0===b.orbit?3.5:b.orbit,phi:void 0===b.phi?\u03c4/4:b.phi,theta:b.theta||0,lookAt:b.lookAt||[0,0,0]});this.singleton="camera";var c=this.controls=a.getCameraControls()||ThreeBox.OrbitControls.bind(a.tCamera(),null,this.get());this.on("change",function(a){_.each(a,function(a,b){"lookAt"!=b&&("theta"==b&&(a=Math.min(\u03c0/2-1E-4,Math.max(-\u03c0/2+1E-4,a))),c[b]=a)});a.lookAt&&c.lookAt.set.apply(c.lookAt,a.lookAt);c.update()});c.update();this.update=
function(){this.set({orbit:c.orbit,phi:c.phi,theta:Math.min(\u03c0/2-1E-4,Math.max(-\u03c0/2+1E-4,c.theta))},null,!0);var a=this.get("lookAt");a[0]=c.lookAt.x;a[1]=c.lookAt.y;a[2]=c.lookAt.z}};MathBox.Attributes.mixin(MathBox.CameraProxy);MathBox.Overlay=function(){(this.domElement=document.createElement("div")).className="mathbox-overlay";this.sprites=[];this.v=new THREE.Vector3;this.q=new THREE.Vector3};
MathBox.Overlay.prototype={size:function(a,b){this.width=a;this.height=b;this.domElement.style.width=a+"px";this.domElement.style.height=b+"px"},add:function(a){-1==this.sprites.indexOf(a)&&(this.sprites.push(a),a.element.parentNode||this.domElement.appendChild(a.element),_.each(a.children,function(a){this.add(a)}.bind(this)))},remove:function(a){var b;-1!=(b=this.sprites.indexOf(a))&&(this.sprites.splice(b,1),a.element.parentNode&&a.element.parentNode.removeChild(a.element),_.each(a.children,function(a){this.remove(a)}.bind(this)))},
update:function(a){a.fov?this.fov=.5/Math.tan(a.fov*Math.PI/360)*this.height:(this.fov=null,this.cx=a.left+a.right,this.cy=a.top+a.bottom,this.dx=this.width/(a.right-a.left),this.dy=this.height/(a.bottom-a.top));_.each(this.sprites,function(b){this._update(b,a)}.bind(this));_.each(this.sprites,function(b){this._measure(b,a)}.bind(this));_.each(this.sprites,function(b){this._vis(b,a)}.bind(this))},_measure:function(a,b){if(a.measure){var c=a.element;a.width=c.offsetWidth;a.height=c.offsetHeight;a.measure=
!1}},_vis:function(a,b){if(a.render&&(a.width||a.height)){var c=a.left,e=a.top,d=a.width+c,k=a.height+e;found=!1;_.each(this.sprites,function(b){if(b===a)found=!0;else if(found&&b.render){var m=b.left,h=b.top,l=b.width+m,u=b.height+h;d<m||c>l||k<h||e>u||(b.element.style.display="none",b.render=!1)}})}},_update:function(a,b){for(var c=this.v,e=this.q,d=a.render,k=a.visible,q=a.parent;k&&q;)k=k&&q.visible,q=q.parent;a.render=k&&0<a.opacity;if(a.render)d||(a.element.style.display="block"),c.copy(a.position),
b.matrixWorldInverse.multiplyVector3(c),this.fov?(d=-(c.x/c.z)*this.fov+.5*this.width,k=c.y/c.z*this.fov+.5*this.height):(d=(c.x-this.cx)*this.dx+.5*this.width,k=(c.y-this.cy)*this.dy+.5*this.height),a.distance&&(e.copy(a.tangent).multiplyScalar(.01),e.addSelf(a.position),b.matrixWorldInverse.multiplyVector3(e),q=0<a.distance?1:-1,e.subSelf(c),e.z=0,e.normalize().multiplyScalar(a.distance),d+=Math.abs(e.y)*q,k+=Math.abs(e.x)*q),d=Math.round(d),k=Math.round(k),a.left!==d&&(a.left=d,a.element.style.left=
d+"px"),a.top!==k&&(a.top=k,a.element.style.top=k+"px"),a.lastOpacity!==a.opacity&&(a.element.style.opacity=a.opacity,a.lastOpacity=a.opacity);else if(d||null===d)a.element.style.display="none"}};
MathBox.Sprite=function(a,b,c){this.element=a;this.tangent=b||new THREE.Vector3(1,0,0);this.distance=c||0;this.height=this.width=0;this.measure=this.visible=!0;this.render=null;this.content="";this.lastOpacity=this.lastTop=this.lastLeft=null;a.style.position="absolute";a.style.left=0;a.style.top=0;a.style.opacity=0;THREE.Object3D.call(this)};MathBox.Sprite.prototype=_.extend(new THREE.Object3D,{});
MathBox.Primitive=function(a){if(null!==a){var b=this.defaults();a&&(a.style=_.extend(b.style,a.style||{}),a=_.extend(b,a||{}));a=a||b;this.set(a);this.style=new MathBox.Style;this.style.set(this.get().style||{});this.on("change",function(a){void 0!==a.style&&this.style.set(a.style)}.bind(this));this.set("sequence",a.sequence||++MathBox.Primitive.sequence);this.set("id",a.id||this.sequence);this.init()}};MathBox.Primitive.sequence=0;MathBox.Primitive.types={};
MathBox.Primitive.prototype={defaults:function(){return{}},type:function(){return"primitive"},init:function(){},make:function(){},destroy:function(){},renderables:function(){return[]},adjust:function(a){}};MathBox.Attributes.mixin(MathBox.Primitive);MicroEvent.mixin(MathBox.Primitive);MathBox.Curve=function(a){null!==a&&MathBox.Primitive.call(this,a)};
MathBox.Curve.prototype=_.extend(new MathBox.Primitive(null),{defaults:function(){return{n:64,domain:[0,1],data:null,expression:function(){return 0},live:!0,points:!1,line:!0,style:{}}},type:function(){return"curve"},renderables:function(){return[this.line,this.points]},adjust:function(a){a=this.get();this.line.show(a.line);this.points.show(a.points);(a.line||a.points)&&0<this.style.get("opacity")&&a.live&&this.calculate()},make:function(){var a=this.get(),b=this.style,c=a.n,e=this.vertices=[];MathBox.loop(c,
function(){e.push(new THREE.Vector3)});c=function(c){return new MathBox.Renderable.Mesh(e,{type:c,dynamic:a.live},b)};this.line=c("line");this.points=c("points");this.calculate()},calculate:function(){var a=this.vertices,b=this.get(),c=b.data,e=b.domain,d=b.n,k=e[0],q=(e[1]-k)/(d-1),m;MathBox.loop(d,function(d){m=c&&void 0!==c[d]?c[d]:b.expression.call(this,k,d);var e=0,u=0,r=0;if(m instanceof Array){var x=m.length;0<x&&(e=m[0]);1<x&&(u=m[1]);2<x&&(r=m[2])}else e=k,u=+m;a[d].set(e,u,r);k+=q}.bind(this))}});
MathBox.Primitive.types.curve=MathBox.Curve;MathBox.Bezier=function(a){MathBox.Curve.call(this,a)};
MathBox.Bezier.prototype=_.extend(new MathBox.Curve(null),{defaults:function(){return{n:64,domain:[0,1],data:null,order:3,expression:function(){return 0},live:!0,points:!1,line:!0,style:{}}},type:function(){return"bezier"},calculate:function(){var a=this.vertices,b=this.get(),c=b.domain,e=b.data,d=b.order,k=b.n;if(1>d||3<d)throw"Bezier curve order must be 1, 2 or 3.";var q=[],m;MathBox.loop(d+1,function(a){m=e&&void 0!==e[a]?e[a]:b.expression.call(this,a,a);var c=a=0,d=0;if(m instanceof Array){var h=
m.length;0<h&&(a=m[0]);1<h&&(c=m[1]);2<h&&(d=m[2])}else a=l,c=+m;q.push(new THREE.Vector3(a,c,d))}.bind(this));var h={bezierPoints:q},l=c[0],u=(c[1]-l)/(k-1);MathBox.loop(k,function(b){a[b].set(l,0,0);l+=u});c={uniforms:h,shaders:{position:function(a,b){a.snippet("bezier"+d).snippet("mathTransform");b.viewport(a)}}};this.line.set(c);this.points.set(c)}});MathBox.Primitive.types.bezier=MathBox.Bezier;
MathBox.Axis=function(a){null!==a&&(MathBox.Primitive.call(this,a),this.on("change",function(a){void 0!==a.size&&this.arrow&&this.arrow.set("size",a.size)}))};
MathBox.Axis.prototype=_.extend(new MathBox.Primitive(null),{defaults:function(){return{axis:0,offset:[0,0,0],n:2,arrow:!0,line:!0,labels:!1,decimals:2,distance:15,ticks:10,tickUnit:1,tickScale:10,size:.07,style:{lineWidth:4,color:new THREE.Color(7368816)},formatter:null,zero:!0}},renderables:function(){return[this.line,this.ticks,this.arrow,this.labels]},type:function(){return"axis"},adjust:function(a,b){var c=this.get(),e=c.axis,d=c.offset,k=c.arrow,q=c.line,m=c.labels,h=c.n,l=c.ticks,u=c.tickUnit,
r=c.tickScale,c=c.decimals,x=this.points,D=this.labelPoints,E=this.labelTangent,F=this.tickPoints,G=this.tickSigns,g=[0,0,0],L=new THREE.Vector3;new THREE.Vector4;var A=a.axis(e),O=A[0],A=A[1],ia=(A-O)/(h-1);L.set.apply(L,d);MathBox.loop(h,function(a){g[e]=O+a*ia;x[a].set.apply(x[a],g);x[a].addSelf(L)});this.line.show(q);this.arrow.show(k);h=this.scale=MathBox.Ticks(O,A,l,u,r,!0);this.ticks.show(!!l);if(l){l=Math.floor(F.length/2);h.length>l&&(h=h.slice(0,l));var l=[0,0,0],R;l[2==e?0:1-e]=.01*(A-
O);this.epsilon.set.apply(this.epsilon,l);g=[0,0,0];_.each(h,function(a,b){g[e]=a;var c=2*b;F[c].set.apply(F[c],g);F[c].addSelf(L);G[c]=1;F[c+1].copy(F[c]);G[c+1]=-1;D[b].copy(F[c]);R=c+1});l=R+1;for(h=F.length;l<h;)F[l].copy(F[R]),G[l]=G[R],l++}g=[0,0,0];g[e]=1;E.set.apply(E,g);this.labels.show(!!m);this.labels.set("decimals",c)},make:function(){var a=this.get(),b=a.n,c=a.size,e=a.ticks,d=a.distance,k=a.formatter,q=this.style,m=this.points=[],h=this.labelPoints=[],l=this.labelTangent=new THREE.Vector3,
u=this.tickPoints=[],r=this.tickSigns=[],x=this.epsilon=new THREE.Vector3;MathBox.loop(b,function(a){m.push(new THREE.Vector3)});MathBox.loop(4*e,function(a){h.push(new THREE.Vector3)});MathBox.loop(8*e,function(a){u.push(new THREE.Vector3);r.push(1)});var e={dynamic:!0,size:c,offset:.5},c={dynamic:!0,size:.2*c},d={dynamic:!0,distance:d},D=function(b){b=this.scale[b];return 0!=b||a.zero?k?k(b):b:""}.bind(this);this.line=new MathBox.Renderable.Mesh(m,{dynamic:!0,type:"line"},q);this.arrow=new MathBox.Renderable.ArrowHead(m[b-
2],m[b-1],e,q);this.ticks=new MathBox.Renderable.Ticks(u,r,x,c,q);this.labels=new MathBox.Renderable.Labels(h,l,D,d,q)}});MathBox.Axis.validateArgs=function(a){"number"==typeof a&&(a={axis:a});return a};MathBox.Primitive.types.axis=MathBox.Axis;MathBox.Grid=function(a){null!==a&&MathBox.Primitive.call(this,a)};
MathBox.Grid.prototype=_.extend(new MathBox.Primitive(null),{defaults:function(){return{axis:[0,1],offset:[0,0,0],show:[!0,!0],n:2,ticks:[10,10],tickUnit:[1,1],tickScale:[10,10],style:{lineWidth:1,color:new THREE.Color(10526880)}}},type:function(){return"grid"},renderables:function(){return this.lines||[]},adjust:function(a){function b(a,b,c,d,e){var g=l.slice(),h=0,k=MathBox.Ticks(b.min,b.max,b.ticks,b.tickUnit,b.tickScale,!0);k.length>d&&(k=k.slice(0,d));_.each(k,function(d){g[b.axis]=d+l[b.axis];
g[c.axis]=c.min+l[c.axis];MathBox.loop(e-1,function(b){a[h].set.apply(a[h],g);h++;g[c.axis]+=c.inv;a[h].set.apply(a[h],g);h++})});d=Math.max(0,h-1);for(k=a.length;h<k;)a[h++].copy(a[d])}var c=this.get(),e=c.axis,d=c.ticks,k=c.tickUnit,q=c.tickScale,m=c.n,h=c.show,l=c.offset,c=this.points,u=this.limit,r=[];"number"==typeof m&&(m=[m,m]);_.each(e,function(b,c){var e=a.axis(b);r.push({axis:b,min:e[0],max:e[1],inv:(e[1]-e[0])/(m[c]-1),ticks:d[c],tickUnit:k[c],tickScale:q[c]})});this.lines[0].show(h[0]);
this.lines[1].show(h[1]);h[0]&&b(c[0],r[1],r[0],u[0],m[0]);h[1]&&b(c[1],r[0],r[1],u[1],m[1])},make:function(a){var b=this.get();a=b.ticks;var c=b.n,e=this.points=[[],[]],b=this.style;"number"==typeof c&&(c=[c,c]);var d=this.limit=[0,0];_.each(a,function(a,b){b=1-b;d[b]=4*a;MathBox.loop(d[b]*(c[b]-1)*2,function(a){e[b].push(new THREE.Vector3)})});this.lines=[];this.lines.push(new MathBox.Renderable.Mesh(e[0],{type:"line",strip:!1,dynamic:!0},b));this.lines.push(new MathBox.Renderable.Mesh(e[1],{type:"line",
strip:!1,dynamic:!0},b))}});MathBox.Primitive.types.grid=MathBox.Grid;MathBox.Vector=function(a){null!==a&&(MathBox.Primitive.call(this,a),this.render=[],this.arrows=[],this.line=this.points=this.vertices=null,this.on("change",function(a){void 0!==a.size&&_.each(this.arrows,function(c){c.set("size",a.size)})}))};MathBox.Vector.vLast=new THREE.Vector3;MathBox.Vector.vCurrent=new THREE.Vector3;
MathBox.Vector.prototype=_.extend(new MathBox.Primitive(null),{defaults:function(){return{n:1,data:null,arrow:!0,expression:function(){return 0},live:!0,style:{},size:.07}},type:function(){return"vector"},renderables:function(){return this.render},adjust:function(a){var b=this.get();0<this.style.get("opacity")&&(b.arrow||b.live)&&this.calculate(a);_.each(this.arrows,function(a){a.show(b.arrow)})},make:function(){var a=this.get(),b=a.arrow,c=this.style,e=a.n,d=this.vertices=[],k=this.points=[],q=this.render=
[],m=this.arrows=[],h={dynamic:a.live,type:"line",strip:!1},l={size:a.size},u=0;MathBox.loop(e,function(){d.push(new THREE.Vector3);d.push(new THREE.Vector3);k.push(new THREE.Vector3);k.push(new THREE.Vector3);if(b){var a=new MathBox.Renderable.ArrowHead(k[u++],k[u++],l,c);q.push(a);m.push(a)}});this.line=new MathBox.Renderable.Mesh(d,h,c);q.push(this.line);this.calculate()},calculate:function(a){var b=this.vertices,c=this.arrows,e=this.points,d=this.get(),k=d.data,q=d.arrow,m=d.n,h=d.size,l=this.style.get("mathScale"),
u=0,r=0;MathBox.loop(2*m,function(m){p=k&&void 0!==k[m]?k[m]:d.expression.call(this,r,u);var D=0,E=0,F=0;if(p instanceof Array){var G=p.length;0<G&&(D=p[0]);1<G&&(E=p[1]);2<G&&(F=p[2])}else D=m,E=+p,F=0;e[m].set(D,E,F);b[m].set(D,E,F);a&&q&&1==m%2&&(D=MathBox.Vector.vLast,E=MathBox.Vector.vCurrent,E.copy(b[m]),D.copy(b[m-1]),a.to(E),a.to(D),E.subSelf(D).multiplySelf(l),G=E.length(),F=Math.min(1,.5*G/h),F=(1-(1-F)*(1-F))*h,G-=F,E.normalize().multiplyScalar(G).divideSelf(l).addSelf(D),a.from(E),b[m].copy(E),
c[r].set({size:F}));r=u?r+1:r;u=(u+1)%2}.bind(this))}});MathBox.Primitive.types.vector=MathBox.Vector;MathBox.Surface=function(a){null!==a&&MathBox.Primitive.call(this,a)};
MathBox.Surface.prototype=_.extend(new MathBox.Primitive(null),{defaults:function(){return{n:[64,64],domain:[[0,1],[0,1]],data:null,expression:function(){return 0},live:!0,points:!1,line:!1,mesh:!0,doubleSided:!0,flipSided:!1,shaded:!0,style:{}}},type:function(){return"surface"},renderables:function(){return[this.mesh,this.line,this.points]},adjust:function(a){a=this.get();this.mesh.show(a.mesh);this.line.show(a.line);this.points.show(a.points);(a.mesh||a.line||a.points)&&0<this.style.get("opacity")&&
a.live&&this.calculate()},make:function(){var a=this.get(),b=this.style,c=a.n;"number"==typeof c&&(c=[c,c]);var e=this.geometry=new THREE.PlaneGeometry(2,2,c[0]-1,c[1]-1);this.vertices=e.vertices;this.mesh=new MathBox.Renderable.Mesh(e,{type:"mesh",doubleSided:a.doubleSided,flipSided:a.flipSided,shaded:a.shaded,smooth:!0,dynamic:a.live},b);this.line=new MathBox.Renderable.Mesh(e,{type:"mesh",shaded:a.shaded,smooth:!0,dynamic:a.live,wireframe:!0},b);this.points=new MathBox.Renderable.Mesh(e.vertices,
{type:"points",dynamic:a.live},b);if(a.shaded){var d=this.tangents=[[],[]];MathBox.loop(c[0]*c[1],function(){d[0].push(new THREE.Vector3);d[1].push(new THREE.Vector3)})}this.calculate()},calculate:function(){var a=this.vertices,b=this.tangents,c=this.get(),e=c.data,d=c.domain,k=c.n,q=c.flipSided,m=q?1:0,q=q?0:1;"number"==typeof k&&(k=[k,k]);var h=d[0][0],l=d[1][0],u=(d[0][1]-h)/(k[0]-1),r=(d[1][1]-l)/(k[1]-1),x,D=0;MathBox.loop(k[1],function(b){h=d[0][0];MathBox.loop(k[0],function(d){x=e&&void 0!==
e[b]&&void 0!==e[b][d]?e[b][d]:c.expression.call(this,h,l,d,b,D);var g=d=0,k=0;if(x instanceof Array){var m=x.length;0<m&&(d=x[0]);1<m&&(g=x[1]);2<m&&(k=x[2])}else d=h,g=+x,k=l;a[D].set(d,g,k);h+=u;D++}.bind(this));l+=r}.bind(this));if(c.shaded){var D=0,l=d[1][0],E=k[0];MathBox.loop(k[1],function(c){h=d[0][0];var e=c?c-1:0,g=Math.min(k[1]-1,c+1);MathBox.loop(k[0],function(d){var l=d?d-1:0,m=Math.min(k[0]-1,d+1),q=a[d+c*E];m==d?b[0][D].subVectors(q,a[l+c*E]).add(q):b[0][D].copy(a[m+c*E]);g==c?b[1][D].subVectors(q,
a[d+e*E]).add(q):b[1][D].copy(a[d+g*E]);h+=u;D++});l+=r});this.line.set("attributes",{positionDU:b[m],positionDV:b[q]});this.mesh.set("attributes",{positionDU:b[m],positionDV:b[q]})}}});MathBox.Primitive.types.surface=MathBox.Surface;MathBox.BezierSurface=function(a){this.matrixX=new THREE.Matrix4;this.matrixY=new THREE.Matrix4;this.matrixZ=new THREE.Matrix4;this.coefficients=new THREE.Matrix4(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);MathBox.Surface.call(this,a)};
MathBox.BezierSurface.prototype=_.extend(new MathBox.Surface(null),{defaults:function(){return{n:[64,64],domain:[[0,1],[0,1]],data:null,order:3,expression:function(){return 0},live:!0,points:!1,line:!1,mesh:!0,doubleSided:!0,flipSided:!1,shaded:!0,style:{}}},type:function(){return"bezierSurface"},calculate:function(){var a=this.vertices,b=this.get(),c=b.domain,e=b.data,d=b.order,k=b.shaded,q=b.n;"number"==typeof q&&(q=[q,q]);if(3!=d)throw"Bezier surface order must be 3.";var m=[],h;MathBox.loop(d+
1,function(a){MathBox.loop(d+1,function(c){h=e&&void 0!==e[a]&&void 0!==e[a][c]?e[a][c]:b.expression.call(this,c,a,c,a);var d=0,k=0,l=0;h instanceof Array?(c=h.length,0<c&&(d=h[0]),1<c&&(k=h[1]),2<c&&(l=h[2])):(d=c,k=+h,l=a);m.push([d,k,l])}.bind(this))}.bind(this));h=m;this.matrixX.set(h[0][0],h[1][0],h[2][0],h[3][0],h[4][0],h[5][0],h[6][0],h[7][0],h[8][0],h[9][0],h[10][0],h[11][0],h[12][0],h[13][0],h[14][0],h[15][0]);this.matrixY.set(h[0][1],h[1][1],h[2][1],h[3][1],h[4][1],h[5][1],h[6][1],h[7][1],
h[8][1],h[9][1],h[10][1],h[11][1],h[12][1],h[13][1],h[14][1],h[15][1]);this.matrixZ.set(h[0][2],h[1][2],h[2][2],h[3][2],h[4][2],h[5][2],h[6][2],h[7][2],h[8][2],h[9][2],h[10][2],h[11][2],h[12][2],h[13][2],h[14][2],h[15][2]);var l=this.coefficients;this.matrixX.multiplySelf(l).transpose().multiplySelf(l);this.matrixY.multiplySelf(l).transpose().multiplySelf(l);this.matrixZ.multiplySelf(l).transpose().multiplySelf(l);var l={bezierSurfaceX:this.matrixX,bezierSurfaceY:this.matrixY,bezierSurfaceZ:this.matrixZ},
u=c[0][0],r=c[1][0],x=(c[0][1]-u)/(q[0]-1),D=(c[1][1]-r)/(q[1]-1),E=0;MathBox.loop(q[1],function(b){u=c[0][0];MathBox.loop(q[0],function(b){a[E].set(u,r,0);u+=x;E++}.bind(this));r+=D}.bind(this));l={uniforms:l,shaders:{position:function(a,b){k?(a.snippet("bezierSurface"+d),a.group(),a.snippet("mathTransform"),b.viewport(a),a.next(),a.snippet("mathTransform"),b.viewport(a),a.next(),a.snippet("mathTransform"),b.viewport(a),a.combine()):(a.snippet("bezierSurface"+d).snippet("mathTransform"),b.viewport(a))}}};
this.mesh.set(l);this.line.set(l);this.points.set(l)}});MathBox.Primitive.types.bezierSurface=MathBox.BezierSurface;MathBox.Platonic=function(a){null!==a&&MathBox.Primitive.call(this,a)};
MathBox.Platonic.prototype=_.extend(new MathBox.Primitive(null),{defaults:function(){return{n:1,type:"cube",points:!1,line:!1,mesh:!0,doubleSided:!0,flipSided:!1,shaded:!0,style:{}}},type:function(){return"platonic"},renderables:function(){return[this.mesh,this.line,this.points]},adjust:function(a){a=this.get();this.mesh.show(a.mesh);this.line.show(a.line);this.points.show(a.points)},make:function(){var a=this.get(),b=this.style,c;switch(a.type){case "cube":c=new THREE.CubeGeometry(2,2,2,1,1,1)}this.mesh=
new MathBox.Renderable.Mesh(c,{type:"mesh",doubleSided:a.doubleSided,flipSided:a.flipSided,shaded:a.shaded,smooth:!1,dynamic:a.live},b);this.line=new MathBox.Renderable.Mesh(c,{type:"mesh",shaded:a.shaded,smooth:!1,dynamic:a.live,wireframe:!0},b);this.points=new MathBox.Renderable.Mesh(c.vertices,{type:"points",dynamic:a.live},b)}});MathBox.Primitive.types.platonic=MathBox.Platonic;
MathBox.Renderable=function(a,b){if(null!==a){this.id=++MathBox.Renderable.id;var c=this.defaults();a&&(a=_.extend(c,a||{}));this.set(a||c);this.geometry=this.material=this.object=null;this.visible=!0;this.style=b||new MathBox.Style;this.style.on("change",this.styleCallback=this.refreshStyle.bind(this));this.on("change",this.uniformsCallback=this.refreshOptions.bind(this));this.mathTransform=new THREE.Matrix4}};MathBox.Renderable.id=0;
MathBox.Renderable.prototype={defaults:function(){return{}},make:function(a){},destroy:function(){},show:function(a){a=void 0===a?!0:!!a;a!=this.visible&&(this.visible=a,this.refresh())},isVisible:function(){return this.object&&this.object.visible},composeTransform:function(a,b,c){var e=new THREE.Matrix4,d=new THREE.Matrix4;e.identity();b=new THREE.Euler(b.x,b.y,b.z,this.object.rotation.order);e.makeRotationFromEuler(b);d.makeScale(c.x,c.y,c.z);this.mathTransform.multiplyMatrices(e,d);c=this.mathTransform.elements;
c[12]=a.x;c[13]=a.y;c[14]=a.z},refreshStyle:function(a){var b=this.style.get();a=a||b;this.material&&this.material.applyUniforms(a);if(this.object){this.object.frustumCulled=!1;a.worldPosition&&(this.object.position=b.worldPosition);a.worldRotation&&(this.object.rotation=b.worldRotation);a.worldScale&&(this.object.scale=b.worldScale);if(a.mathPosition||a.mathRotation||a.mathScale)this.composeTransform(b.mathPosition,b.mathRotation,b.mathScale),this.material&&this.material.applyUniforms({mathTransform:this.mathTransform});
void 0!==a.opacity&&(this.object.visible=this.visible&&0<b.opacity);void 0===a.opacity&&void 0===a.zIndex||!this.material||(this.object.renderDepth=b.zIndex*(1==b.opacity?1:-1))}},refreshOptions:function(a){var b=this.get();a=a||b;if(this.material){b=this.get();if(void 0!==a.doubleSided||void 0!==a.flipSided)this.material.side=b.doubleSided?THREE.DoubleSide:b.flipSided?THREE.BackSide:THREE.FrontSide,b={flipSided:b.doubleSided&&b.flipSided?-1:1},this.material.applyUniforms(b);(b=this.get().uniforms)&&
this.material.applyUniforms(b);(b=this.get().attributes)&&this.material.applyAttributes(b)}},refresh:function(){this.refreshStyle();this.refreshOptions()},adjust:function(a){this.material&&this.material.applyUniforms(a.uniforms())}};MathBox.Attributes.mixin(MathBox.Renderable);MathBox.Renderable.Mesh=function(a,b,c){this.points=a;MathBox.Renderable.call(this,b,c)};
MathBox.Renderable.Mesh.prototype=_.extend(new MathBox.Renderable(null),{defaults:function(){return{type:"points",doubleSided:!0,dynamic:!1,absolute:!1,strip:!0,shaders:{}}},make:function(a){var b=this.get(),c=b.type,e=b.strip,d={points:THREE.PointCloud,line:THREE.Line,mesh:THREE.Mesh}[c];if(!d)throw"Invalid Mesh type '"+c+"'";a=this.material=a.generic(b);var k;k=this.points;k instanceof Array?(k=this.geometry=new THREE.Geometry,k.vertices=this.points):k=this.geometry=k;k.dynamic=b.dynamic;switch(c){case "line":b=
new THREE.Line(k,a,e?THREE.LineStrip:THREE.LinePieces);break;default:b=new d(k,a)}this.object=b;this.refresh()},adjust:function(a){this.get().dynamic&&(this.geometry.verticesNeedUpdate=!0);MathBox.Renderable.prototype.adjust.call(this,a)}});MathBox.Renderable.ArrowHead=function(a,b,c,e){this.from=a;this.to=b;MathBox.Renderable.call(this,c,e)};MathBox.Renderable.ArrowHead.geometry=new THREE.CylinderGeometry(.33,0,1,16,1);
MathBox.Renderable.ArrowHead.prototype=_.extend(new MathBox.Renderable(null),{defaults:function(){return{offset:0,absolute:!0,size:.1}},make:function(a){var b=this.get();a=this.material=a.generic(b);this._from=new THREE.Vector3;this._to=new THREE.Vector3;this.diff=new THREE.Vector3;this.bi=new THREE.Vector3;this.normal=new THREE.Vector3(0,0,1);b=this.geometry=MathBox.Renderable.ArrowHead.geometry;this.object=new THREE.Mesh(b,a);this.refresh()},isVisible:function(){return this.visible&&0<this.style.get("opacity")},
adjust:function(a){var b=this.get(),c=b.offset,e=this._from.copy(this.from),d=this._to.copy(this.to);this.mathTransform.multiplyVector3(e);this.mathTransform.multiplyVector3(d);a.to(e);a.to(d);e=this.diff.sub(e,d);if(.001>e.length())this.object.visible=!1;else{this.object.visible=this.visible;e=e.normalize();this.normal.x=this.diff.y+.1;this.normal.y=this.diff.z+.2;this.normal.z=this.diff.x+.3;this.normal.normalize();var k=this.bi.cross(this.normal,this.diff).normalize(),q=this.normal.cross(this.bi,
this.diff),b=b.size,d=(new THREE.Matrix4(k.x,e.x,q.x,d.x,k.y,e.y,q.y,d.y,k.z,e.z,q.z,d.z,0,0,0,1)).scale(new THREE.Vector3(b,b,b));this.object.updateMatrix();this.object.matrix.multiplySelf(d);d.identity().setPosition({x:0,y:.5-c,z:0});this.object.matrix.multiplySelf(d);this.object.matrixAutoUpdate=!1;this.object.matrixWorldNeedsUpdate=!0;MathBox.Renderable.prototype.adjust.call(this,a)}}});
MathBox.Renderable.Ticks=function(a,b,c,e,d){this.points=a;this.signs=b;this.epsilon=c;MathBox.Renderable.call(this,e,d)};
MathBox.Renderable.Ticks.prototype=_.extend(new MathBox.Renderable(null),{defaults:function(){return{dynamic:!1,absolute:!1,size:.1}},make:function(a){var b=this.get(),c=this.points;a=this.material=a.generic({type:"line",shaders:{position:function(a,c){c.position(a,b);a.snippet("tickVertexSplit");a.group();c.viewport(a);a.next();c.viewport(a);a.combine();a.snippet("tickVertexJoin")}}});var e=this.geometry=new THREE.Geometry;e.vertices=c;this.object=new THREE.Line(e,a,THREE.LinePieces);this.refresh()},
adjust:function(a){var b=this.get();this.material&&this.material.applyAttributes({tickSign:this.signs});this.material&&this.material.applyUniforms({tickEpsilon:this.epsilon,tickSize:b.size});b.dynamic&&(this.material.attributes.tickSign.needsUpdate=!0,this.geometry.verticesNeedUpdate=!0);MathBox.Renderable.prototype.adjust.call(this,a)}});MathBox.Renderable.Labels=function(a,b,c,e,d){this.points=a;this.tangent=b;this.callback=c;this.sprites=[];MathBox.Renderable.call(this,e,d)};
MathBox.Renderable.Labels.prototype=_.extend(new MathBox.Renderable(null),{defaults:function(){return{absolute:!0,distance:15,size:1}},make:function(a){this.get();var b=this.tangent,c=this.sprites;a=this.points.length;this._anchor=new THREE.Vector3;var e=document.createElement("div"),d=this.object=new MathBox.Sprite(e);e.className="mathbox-labels";MathBox.loop(a,function(a){a=document.createElement("div");var e=document.createElement("div");a.appendChild(e);var m=new MathBox.Sprite(a,b);a.className=
"mathbox-label";e.className="mathbox-wrap";e.style.position="relative";e.style.display="inline-block";e.style.left="-50%";e.style.top="-.5em";c.push(m);d.add(m)})},adjust:function(a,b,c,e,d){var k=this.get(),q=this.points;b=this.sprites;var m=this.callback,h=k.decimals,l=this.style.get("opacity"),u=window.MathJax&&MathJax.Hub,r=1/Math.log(10);_.each(b,function(b,c){b.position.copy(q[c]);a.to(b.position);d.matrix.multiplyVector3(b.position);b.distance=k.distance;b.opacity=l;var e="";if(m){e=m(c);void 0===
e&&(e="");if(+e==e){var F=+e;if(0!=F)var e=0>F?-1:1,F=Math.abs(F),G=Math.pow(10,h-1-Math.floor(Math.log(F)*r)),e=F=e*Math.round(G*F)/G}u||(e=(""+e).replace(/^-/,"\u2013"))}b.content!==e&&(F=b.element.children[0],b.content=e,b.measure=!0,u?(F.innerHTML="\\("+e+"\\)",MathJax.Hub.queue.Push(["Typeset",MathJax.Hub,F])):F.innerHTML=e)});MathBox.Renderable.prototype.adjust.call(this,a)}});
MathBox.Viewport=function(a){if(null!==a){var b=this.defaults();a=_.extend(b,a||{});this.set(a);this.singleton="viewport";this._uniforms={}}};
MathBox.Viewport.prototype={defaults:function(){return{type:"none",rotation:[0,0,0],position:[0,0,0]}},uniforms:function(){return this._uniforms},axis:function(a){return[0,1]},to:function(a){},from:function(a){},update:function(a){var b=this.get();_.each(["position","rotation"],function(c){a[c].set.apply(a[c],b[c])})},shader:function(a){a.snippet("mathToWorld")},validateRotation:function(a){return a.constructor==Array?(a=a.concat([0,0,0]),a.slice(0,3)):this.get("rotation")},validatePosition:function(a){return a.constructor==
Array?(a=a.concat([0,0,0]),a.slice(0,3)):this.get("position")}};MathBox.Attributes.mixin(MathBox.Viewport,"type");MathBox.Viewport.types={};MathBox.Viewport.make=function(a){return new (MathBox.Viewport.types[a.type]||MathBox.Viewport.types.cartesian||MathBox.Viewport)(a)};
MathBox.ViewportCartesian=function(a){if(null!==a){var b=MathBox.Viewport;b.call(this,a);this.super=b.prototype;this.transform=new THREE.Matrix4;this.inverse=new THREE.Matrix4;_.extend(this._uniforms,{viewportTransform:this.transform,viewportInverse:this.inverse})}};
MathBox.ViewportCartesian.prototype=_.extend(new MathBox.Viewport(null),{defaults:function(){return{type:"cartesian",range:[[-1,1],[-1,1],[-1,1]],scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]}},to:function(a){this.transform.multiplyVector3(a)},from:function(a){this.inverse.multiplyVector3(a)},axis:function(a){var b=this.get().range[a];a=b[0];var c=b[1],b=Math.min(a,c);a=Math.max(a,c);return[b,a]},update:function(a){var b=this.get(),c=b.range,e=b.scale,b=c[0][0],d=c[1][0],k=c[2][0],q=c[0][1]-b,m=
c[1][1]-d,c=c[2][1]-k,h=e[0],l=e[1],e=e[2],u=[q/(2*h),0,0,b+q/2,0,m/(2*l),0,d+m/2,0,0,c/(2*e),k+c/2,0,0,0,1];this.transform.set.apply(this.transform,[2*h/q,0,0,-(2*b+q)*h/q,0,2*l/m,0,-(2*d+m)*l/m,0,0,2*e/c,-(2*k+c)*e/c,0,0,0,1]);this.inverse.set.apply(this.inverse,u);MathBox.Viewport.prototype.update.call(this,a)},validateRange:function(a){a=a||[];for(var b=0;3>b;++b){a[b]=a[b]||[];for(var c=0;2>c;++c)a[b][c]=void 0!==a[b][c]?a[b][c]:2*c-1}return a},validateScale:function(a){a=a||[];for(var b=0;3>
b;++b)a[b]=a[b]||1;return a}});MathBox.Attributes.mixin(MathBox.Viewport);MathBox.Viewport.types.cartesian=MathBox.ViewportCartesian;MathBox.ViewportPolar=function(a){var b=MathBox.ViewportCartesian;b.call(this,a);this.super=b.prototype;_.extend(this._uniforms,{polarAlpha:0,polarAspect:1,polarPower:1,polarFold:1,polarFocus:1,polarHelix:0})};
MathBox.ViewportPolar.prototype=_.extend(new MathBox.ViewportCartesian(null),{defaults:function(){return{type:"polar",range:[[-1,1],[-1,1],[-1,1]],polar:1,fold:1,power:1,helix:0,scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]}},to:function(a){var b=this._uniforms.polarAspect,c=this._uniforms.polarFocus,e=this._uniforms.polarAlpha,d=this._uniforms.polarPower,k=this._uniforms.polarHelix;a.x*=this._uniforms.polarFold;a.y=Math.sign(a.y)*Math.pow(Math.abs(a.y),d);if(1E-4<e){var d=c+a.y*b,q=a.x*e;a.z+=
a.x*k*e;a.x=Math.sin(q)*d;a.y=(Math.cos(q)*d-c)/b}this.transform.multiplyVector3(a)},from:function(a){var b=this._uniforms.polarAspect,c=this._uniforms.polarFocus,e=this._uniforms.polarAlpha,d=this._uniforms.polarFold,k=this._uniforms.polarPower,q=this._uniforms.polarHelix;this.inverse.multiplyVector3(a);if(1E-4<e){var m=a.x,h=a.y*b+c,l=Math.sqrt(m*m+h*h);theta=Math.atan2(m,h);a.x=theta/e;a.y=(l-c)/b;a.z-=a.x*q*e}a.x/=d;a.y=Math.sign(a.y)*Math.pow(Math.abs(a.y),1/k)},axis:function(a){var b=this.super.axis.call(this,
a);min=b[0];max=b[1];alpha=this._uniforms.polarAlpha;aspect=this._uniforms.polarAspect;focus=this._uniforms.polarFocus;1==a&&0<alpha&&(max=Math.max(Math.abs(max),Math.abs(min)),min=Math.max(-focus/aspect+.001,min));return[min,max]},update:function(a){var b=this.get(),c=b.range,e=b.scale,d=b.polar,k=b.fold,q=b.power,b=b.helix,m=1,h=c[0][0],l=c[1][0],u=c[2][0],r=c[0][1]-h,x=c[1][1]-l,c=c[2][1]-u,D=e[0],E=e[1],e=e[2],m=0<r?1:-1,F=Math.abs(x),F=r+(F*m-r)*d,m=Math.abs(F/D/(x/E)),G=[F/(2*D),0,0,h+r/2,0,
x/(2*E),0,l+x/2,0,0,c/(2*e),u+c/2,0,0,0,1];this.transform.set.apply(this.transform,[2*D/F,0,0,-(2*h+r)*D/r,0,2*E/x,0,-(2*l+x)*E/x,0,0,2*e/c,-(2*u+c)*e/c,0,0,0,1]);this.inverse.set.apply(this.inverse,G);this._uniforms.polarAlpha=d;this._uniforms.polarAspect=m;this._uniforms.polarFold=k;this._uniforms.polarPower=q;this._uniforms.polarFocus=0<d?1/d-1:0;this._uniforms.polarHelix=b;MathBox.Viewport.prototype.update.call(this,a)},shader:function(a){a.snippet("polarPower").snippet("cartesianToPolar").snippet("mathToWorld")},
validatePolar:function(a){return Math.max(0,Math.min(1,+a||0))},validateFold:function(a){return+a||0},validatePower:function(a){return+a||0},validateHelix:function(a){return+a||0}});MathBox.Attributes.mixin(MathBox.Viewport);MathBox.Viewport.types.polar=MathBox.ViewportPolar;MathBox.ViewportProjective=function(a){var b=MathBox.ViewportCartesian;b.call(this,a);this.super=b.prototype;_.extend(this._uniforms,{projectiveTransform:new THREE.Matrix4,projectiveInverse:new THREE.Matrix4})};
MathBox.ViewportProjective.prototype=_.extend(new MathBox.ViewportCartesian(null),{defaults:function(){return{type:"projective",range:[[-1,1],[-1,1],[-1,1]],scale:[1,1,1],rotation:[0,0,0],position:[0,0,0],projective:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]}},to:function(a){this._uniforms.projectiveTransform.multiplyVector3(a);this.transform.multiplyVector3(a)},from:function(a){this.inverse.multiplyVector3(a);this._uniforms.projectiveInverse.multiplyVector3(a)},update:function(a){var b=this._uniforms.projectiveTransform,
c=this.get("projective");b.set.apply(b,c[0].concat(c[1],c[2],c[3]));this._uniforms.projectiveInverse.getInverse(b);MathBox.ViewportCartesian.prototype.update.call(this,a)},shader:function(a){a.snippet("projectiveTransform").snippet("mathToWorld")},validateProjective:function(a){if(a.constructor==Array){for(var b=0;3>b;++b)a[b]=a[b]&&a.constructor==Array&&a[b]||[],a[b]=a[b].concat([0,0,0,0]).slice(0,4);return a}}});MathBox.Attributes.mixin(MathBox.Viewport);MathBox.Viewport.types.projective=MathBox.ViewportProjective;
MathBox.ViewportSphere=function(a){var b=MathBox.ViewportCartesian;b.call(this,a);this.super=b.prototype;_.extend(this._uniforms,{sphereAlpha:0,sphereAspectX:1,sphereAspectY:1,sphereYScale:1,sphereFocus:1})};
MathBox.ViewportSphere.prototype=_.extend(new MathBox.ViewportCartesian(null),{defaults:function(){return{type:"sphere",range:[[-1,1],[-1,1],[-1,1]],sphere:1,scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]}},to:function(a){var b=this._uniforms.sphereAspectX,c=this._uniforms.sphereAspectY,e=this._uniforms.sphereYScale,d=this._uniforms.sphereFocus,k=this._uniforms.sphereAlpha;if(1E-4<k){var q=d+a.z*b,m=a.x*k,e=a.y*k/c*e,k=Math.cos(e)*q;a.x=Math.sin(m)*k;a.y=Math.sin(e)*q*c;a.z=(Math.cos(m)*k-d)/b}this.transform.multiplyVector3(a)},
from:function(a){var b=this._uniforms.sphereAspectX,c=this._uniforms.sphereAspectY,e=this._uniforms.sphereYScale,d=this._uniforms.sphereFocus,k=this._uniforms.sphereAlpha;this.inverse.multiplyVector3(a);if(1E-4<k){var q=a.x,m=a.y/c,h=a.z*b+d,l=Math.sqrt(q*q+m*m+h*h),m=Math.atan2(m,Math.sqrt(q*q+h*h)),q=Math.atan2(q,h);a.x=q/k;a.y=m/k*c/e;a.z=(l-d)/b}},axis:function(a){var b=this.super.axis.call(this,a);min=b[0];max=b[1];alpha=this._uniforms.sphereAlpha;beta=this._uniforms.sphereBeta;aspectX=this._uniforms.sphereAspectX;
aspectY=this._uniforms.sphereAspectY;focus=this._uniforms.sphereFocus;2==a&&0<alpha&&(max=Math.max(Math.abs(max),Math.abs(min)),min=Math.max(-focus/aspectX,min));return[min,max]},update:function(a){var b=this.get(),c=b.range,e=b.scale,b=b.sphere,d=0<b?1/b-1:0,k=c[0][0],q=c[1][0],m=c[2][0],h=c[0][1]-k,l=c[1][1]-q,c=c[2][1]-m,u=e[0],r=e[1],e=e[2],x=0<h?1:-1,D=0<l?1:-1,E=Math.abs(c),x=h+(E*x-h)*b,D=l+(E*D-l)*b,E=c/e;aspectX=x/u/E;aspectY=D/r/E/aspectX;aspectZ=l/h*u/r*2;yScale=Math.min(aspectY/b,1+(aspectZ-
1)*b);E=[x/(2*u),0,0,k+h/2,0,D/(2*r),0,q+l/2,0,0,c/(2*e),m+c/2,0,0,0,1];this.transform.set.apply(this.transform,[2*u/x,0,0,-(2*k+h)*u/h,0,2*r/D,0,-(2*q+l)*r/l,0,0,2*e/c,-(2*m+c)*e/c,0,0,0,1]);this.inverse.set.apply(this.inverse,E);this._uniforms.sphereAlpha=b;this._uniforms.sphereAspectX=aspectX;this._uniforms.sphereAspectY=aspectY;this._uniforms.sphereYScale=yScale;this._uniforms.sphereFocus=d;MathBox.Viewport.prototype.update.call(this,a)},shader:function(a){a.snippet("cartesianToSphere").snippet("mathToWorld")},
validateSphere:function(a){return Math.max(0,Math.min(1,+a||0))}});MathBox.Attributes.mixin(MathBox.Viewport);MathBox.Viewport.types.sphere=MathBox.ViewportSphere;
